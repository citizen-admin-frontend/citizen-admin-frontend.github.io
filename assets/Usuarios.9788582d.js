import{D as B,a as V,_ as G,g as k,s as T,n as m,d as S}from"./notify.3f04e7fe.js";import{M as y}from"./Validator.a3b6b341.js";import{D as U,b as F,c as N,d as I,e as R,f as A,g as H,h as z,i as M,j,k as $,l as E,_ as O,m as q}from"./scroll-view.26c409dd.js";import{_ as J}from"./check-box.795ededd.js";import{_ as K,r as t,o as x,c as L,a as o,w as i,b as l,aC as Q,aF as W,aG as X}from"./index.23f2df42.js";import"./exporter.3d044f73.js";const Y={components:{DxDataGrid:U,DxColumn:F,DxFilterRow:N,DxGrouping:I,DxGroupPanel:R,DxSearchPanel:A,DxHeaderFilter:H,DxScrolling:z,DxGridToolbar:M,DxItem:j,DxSelectBox:$,DxGridButton:E,DxPopup:B,DxToolbarItem:V,DxTextBox:G,DxButton:O,DxScrollView:q,DxCheckBox:J},data:()=>({showPopup:!1,crudTitle:"Detalle de Usuario",items:[],model:{type:{}},newPassword:null}),mounted(){this.listAll()},methods:{create(){k(),this.model={active:!0},this.showPopup=!0},onClosePopup(){this.showPopup=!1},async save(){try{let e=Object.assign({},this.model);e.registerDate=y(),await T(e,this.newPassword),e.id&&(m("Registro guardado con \xE9xito","success",3e3),this.listAll(),this.showPopup=!1)}catch(e){console.log(e.message),m(e,"error",4e3)}},showDetail(e){this.model=e,this.newPassword=null,this.showPopup=!0},async listAll(e){this.items=await S(e)}}},Z={style:{padding:"10px",width:"100vw","box-sizing":"border-box"}},ee=l("label",{style:{"font-size":"1.2em","margin-bottom":"5px"}},"Usuarios",-1),oe=["onClick"],te=l("i",{class:"dx-icon-doc"},null,-1),le={class:"dx-field"},se=l("div",{class:"dx-field-label"},"Usuario",-1),ae={class:"dx-field-value"},ie={class:"dx-field"},ne=l("div",{class:"dx-field-label"},"Contrase\xF1a",-1),de={class:"dx-field-value"},re={class:"dx-field"},ce=l("div",{class:"dx-field-label"},"Nombres",-1),ue={class:"dx-field-value"},me={class:"dx-field"},xe=l("div",{class:"dx-field-label"},"Activo",-1),pe={class:"dx-field-value"};function _e(e,a,De,he,fe,n){const p=t("DxFilterRow"),_=t("DxHeaderFilter"),D=t("DxSearchPanel"),h=t("DxScrolling"),f=t("DxGroupPanel"),d=t("DxColumn"),c=t("DxItem"),w=t("DxGridToolbar"),u=t("DxButton"),b=t("DxDataGrid"),r=t("DxTextBox"),v=t("DxCheckBox"),P=t("DxScrollView"),g=t("DxToolbarItem"),C=t("DxPopup");return x(),L("div",Z,[ee,o(b,{id:"dataGrid",ref:"dataGridRef","data-source":e.items,"key-expr":"id","show-borders":!0,height:"calc(100vh - 72px)",width:"100%","allow-column-resizing":!0},{buttonsTemplate:i(({data:s})=>[l("a",{onClick:we=>n.showDetail(s.data),style:{cursor:"pointer",color:"blue"}},[te,Q("\xA0Ver")],8,oe)]),createButton:i(()=>[o(u,{icon:"add",onClick:n.create,text:"Crear",type:"default"},null,8,["onClick"])]),refreshButton:i(()=>[o(u,{icon:"refresh",onClick:n.listAll},null,8,["onClick"])]),default:i(()=>[o(p,{visible:!0}),o(_,{visible:!0}),o(D,{visible:!0,width:240,placeholder:"Buscar..."}),o(h,{mode:"virtual"}),o(f,{visible:!0}),o(d,{width:"120","data-field":"username",caption:"Usuario","sort-order":"asc"}),o(d,{"data-field":"fullName",caption:"Nombres Completos"}),o(d,{type:"buttons",width:110,"cell-template":"buttonsTemplate"}),o(w,null,{default:i(()=>[o(c,{location:"before",template:"createButton"}),o(c,{location:"after",template:"refreshButton"})]),_:1})]),_:1},8,["data-source"]),o(C,{visible:e.showPopup,"drag-enabled":!0,"hide-on-outside-click":!1,"show-close-button":!0,"show-title":!0,width:400,height:350,title:e.crudTitle,"on-hidden":n.onClosePopup},{default:i(()=>[o(P,{height:"calc(400px - 135px)"},{default:i(()=>[l("div",le,[se,l("div",ae,[o(r,{modelValue:e.model.username,"onUpdate:modelValue":a[0]||(a[0]=s=>e.model.username=s)},null,8,["modelValue"])])]),l("div",ie,[ne,l("div",de,[o(r,{modelValue:e.newPassword,"onUpdate:modelValue":a[1]||(a[1]=s=>e.newPassword=s),mode:"password"},null,8,["modelValue"])])]),l("div",re,[ce,l("div",ue,[o(r,{modelValue:e.model.fullName,"onUpdate:modelValue":a[2]||(a[2]=s=>e.model.fullName=s)},null,8,["modelValue"])])]),l("div",me,[xe,l("div",pe,[o(v,{modelValue:e.model.active,"onUpdate:modelValue":a[3]||(a[3]=s=>e.model.active=s)},null,8,["modelValue"])])])]),_:1}),e.model.id!=="admin"?(x(),W(g,{key:0,widget:"dxButton",toolbar:"bottom",location:"after",options:{text:"Guardar",type:"success",onClick:n.save}},null,8,["options"])):X("",!0)]),_:1},8,["visible","title","on-hidden"])])}const Ve=K(Y,[["render",_e]]);export{Ve as default};
