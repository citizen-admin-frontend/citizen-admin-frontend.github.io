import{g as v,u as w,r as S,o as b,c as x,a as r,b as i,d as e,w as m,F as I,s as U,p as V,e as k,_ as K,f as C}from"./index.841e0e4e.js";import{s as L}from"./password.esm.707efee9.js";import{_ as M,l as N,s as $,a as B,i as E,u as _,y as O,R}from"./plugin-vue_export-helper.5a311d7c.js";const l=n=>(V("data-v-9f1d576e"),n=n(),k(),n),T={class:"muniform",style:{"max-width":"400px",margin:"0 auto",display:"flex","justify-content":"center","align-items":"center","max-height":"350px","margin-top":"20px"}},j={class:"container"},A=l(()=>e("div",{style:{width:"100%",padding:"10px","text-align":"center"}},[e("img",{alt:"logo",src:K,height:"60",class:"mr-2"}),e("br"),e("h3",null,"Iniciar sesi\xF3n")],-1)),F={class:"field",style:{width:"100%"}},H=l(()=>e("label",{for:"username"},"Usuario",-1)),J={class:"field",style:{width:"100%"}},q=l(()=>e("label",{for:"password"},"Contrase\xF1a",-1)),G=l(()=>e("br",null,null,-1)),P={__name:"Login",emits:["updatemenu"],setup(n,{emit:f}){const g=v().appContext.config.globalProperties.$firebaseApp,y=N(g),p=w(),h="SystemUsers",s=S({username:null,password:null}),d=async()=>{if(!s.value.username||!s.value.password){p.add({severity:"warn",summary:"MuniHuaura",detail:"Ingrese todos los campos",life:3e3});return}let c=E(O(y,h),_("username","==",s.value.username),_("password","==",btoa(s.value.password))),a=(await R(c)).docs.map(t=>{console.log(t.data(),t);let u=Object.assign({},t.data());return u.id=t.id,delete u.password,u});if(a.length==0)p.add({severity:"error",summary:"MuniHuaura",detail:"Usuario y/o contrase\xF1a incorrecta",life:3e3});else{let t=a[0];sessionStorage.setItem("SystemUser",JSON.stringify(t)),sessionStorage.setItem("items",JSON.stringify([{label:"Sectores",to:{name:"S002"}},{label:"Usuarios",to:{name:"S003"}},{label:"Tipos de Incidente",to:{name:"S004"}}])),f("updatemenu"),C.replace({name:"S002"})}};return(c,o)=>(b(),x(I,null,[r(i($),{position:"bottom-left",style:{width:"90%"}}),e("main",T,[e("div",j,[A,e("div",F,[H,r(i(B),{id:"username",modelValue:s.value.username,"onUpdate:modelValue":o[0]||(o[0]=a=>s.value.username=a),useGrouping:!1,style:{width:"100%"},onKeyup:m(d,["enter"])},null,8,["modelValue","onKeyup"])]),e("div",J,[q,r(i(L),{id:"password",modelValue:s.value.password,"onUpdate:modelValue":o[1]||(o[1]=a=>s.value.password=a),feedback:!1,toggleMask:"",style:{width:"100%"},onKeyup:m(d,["enter"])},null,8,["modelValue","onKeyup"])]),G,r(i(U),{onClick:d,label:"Iniciar sesi\xF3n",style:{width:"100%"}})])])],64))}};var W=M(P,[["__scopeId","data-v-9f1d576e"]]);export{W as default};
