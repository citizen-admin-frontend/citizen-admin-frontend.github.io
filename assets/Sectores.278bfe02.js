import{s as P,r as C,l as S}from"./Sectors.53b86fe4.js";import{D as G,a as k,_ as T,g as y,n as r}from"./notify.b88cca89.js";import"./ui.popup.33d3fbb4.js";import{D as V,b as F,c as I,d as R,e as A,f as N,g as H,h as z,i as E,j as U,k as j,l as M}from"./data-grid.67727c38.js";import{D as O,_ as $,a as q}from"./scroll-view.bd06b888.js";import{_ as J}from"./check-box.75ad800c.js";import{_ as K,r as t,o as L,c as Q,a as e,w as s,b as l,aC as W}from"./index.e1705b20.js";const X={components:{DxDataGrid:V,DxColumn:F,DxFilterRow:I,DxGrouping:R,DxGroupPanel:A,DxSearchPanel:N,DxHeaderFilter:H,DxScrolling:z,DxGridToolbar:E,DxItem:U,DxSelectBox:O,DxGridButton:j,DxPopup:G,DxToolbarItem:k,DxTextBox:T,DxButton:$,DxScrollView:q,DxCheckBox:J},data:()=>({showPopup:!1,crudTitle:"Detalle de Sector",items:[],model:{},newPassword:null}),mounted(){this.listAll()},methods:{create(){y(),this.model={active:!0},this.showPopup=!0},onClosePopup(){this.showPopup=!1},async save(){try{let o=Object.assign({},this.model);await P(o),o.id&&(r("Registro guardado con \xE9xito","success",3e3),this.listAll(),this.showPopup=!1)}catch(o){console.log(o.message),r(o,"error",4e3)}},showDetail(o){this.model=o,this.newPassword=null,this.showPopup=!0},async remove(){M("Seguro deseas eliminar este registro","Eliminar").then(async a=>{a&&(await C(this.model.id),this.showPopup=!1,this.listAll(),r("Registro eliminado con \xE9xito","success",3e3))})},async listAll(o){this.items=await S(o)}}},Y={style:{padding:"10px",width:"100vw","box-sizing":"border-box"}},Z=l("label",{style:{"font-size":"1.2em","margin-bottom":"5px"}},"Sectores",-1),ee=["onClick"],oe=l("i",{class:"dx-icon-doc"},null,-1),te={class:"dx-field"},le=l("div",{class:"dx-field-label"},"Nombre",-1),se={class:"dx-field-value"},ae={class:"dx-field"},ie=l("div",{class:"dx-field-label"},"Activo",-1),ne={class:"dx-field-value"};function re(o,a,de,ce,ue,i){const m=t("DxFilterRow"),p=t("DxHeaderFilter"),D=t("DxSearchPanel"),_=t("DxScrolling"),h=t("DxGroupPanel"),d=t("DxColumn"),c=t("DxItem"),f=t("DxGridToolbar"),u=t("DxButton"),w=t("DxDataGrid"),b=t("DxTextBox"),v=t("DxCheckBox"),g=t("DxScrollView"),x=t("DxToolbarItem"),B=t("DxPopup");return L(),Q("div",Y,[Z,e(w,{id:"dataGrid",ref:"dataGridRef","data-source":o.items,"key-expr":"id","show-borders":!0,height:"calc(100vh - 72px)",width:"100%","allow-column-resizing":!0},{buttonsTemplate:s(({data:n})=>[l("a",{onClick:xe=>i.showDetail(n.data),style:{cursor:"pointer",color:"blue"}},[oe,W("\xA0Ver")],8,ee)]),createButton:s(()=>[e(u,{icon:"add",onClick:i.create,text:"Crear",type:"default"},null,8,["onClick"])]),refreshButton:s(()=>[e(u,{icon:"refresh",onClick:i.listAll},null,8,["onClick"])]),default:s(()=>[e(m,{visible:!0}),e(p,{visible:!0}),e(D,{visible:!0,width:240,placeholder:"Buscar..."}),e(_,{mode:"virtual"}),e(h,{visible:!0}),e(d,{width:"120","data-field":"name",caption:"Nombre","sort-order":"asc"}),e(d,{type:"buttons",width:110,"cell-template":"buttonsTemplate"}),e(f,null,{default:s(()=>[e(c,{location:"before",template:"createButton"}),e(c,{location:"after",template:"refreshButton"})]),_:1})]),_:1},8,["data-source"]),e(B,{visible:o.showPopup,"drag-enabled":!0,"hide-on-outside-click":!1,"show-close-button":!0,"show-title":!0,width:400,height:210,title:o.crudTitle,"on-hidden":i.onClosePopup},{default:s(()=>[e(g,{height:"calc(400px - 135px)"},{default:s(()=>[l("div",te,[le,l("div",se,[e(b,{modelValue:o.model.name,"onUpdate:modelValue":a[0]||(a[0]=n=>o.model.name=n)},null,8,["modelValue"])])]),l("div",ae,[ie,l("div",ne,[e(v,{modelValue:o.model.active,"onUpdate:modelValue":a[1]||(a[1]=n=>o.model.active=n)},null,8,["modelValue"])])])]),_:1}),e(x,{widget:"dxButton",toolbar:"bottom",location:"before",options:{text:"Eliminar",type:"danger",onClick:i.remove}},null,8,["options"]),e(x,{widget:"dxButton",toolbar:"bottom",location:"after",options:{text:"Guardar",type:"success",onClick:i.save}},null,8,["options"])]),_:1},8,["visible","title","on-hidden"])])}const be=K(X,[["render",re]]);export{be as default};
