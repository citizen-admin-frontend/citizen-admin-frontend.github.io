import{s as it,l as Ut}from"./IncidentService.236e4229.js";import{D as zt,a as Gt,_ as jt,g as Kt,n as at}from"./notify.ba33e71d.js";import{l as Yt}from"./Sectors.342c0ec6.js";import{l as Jt}from"./IncidentTypeService.d438c152.js";import{P as Xt,M as j}from"./ui.popup.d3c8699c.js";import{$ as s,ap as qt,T as Zt,j as B,h as p,t as f,aq as Qt,n as b,p as w,ar as ot,ao as K,as as te,q as bt,S as ee,B as N,a0 as ne,at as ie,au as ae,m as Ct,g as St,d as H,e as q,O as oe,z as F,ah as R,av as lt,aw as Et,af as P,a3 as C,J as k,V as le,Z as se,W as Dt,k as re,F as Y,G as L,ax as xt,ay as ue,az as de,_ as ce,aA as pe,r as c,o as x,c as st,a as r,w as m,b as o,aB as he,aC as rt,aD as T,aE as I,aF as O,aG as $}from"./index.897b922b.js";import{r as E,E as A,L as _e,P as me,S as ge,a as fe,D as ve,b as be,c as Ce,d as Se,e as Ee,f as De,g as xe,h as Te,i as Ie,j as ye,k as Be,l as Ae}from"./data-grid.3b8b32da.js";import{D as Oe,_ as we,a as Ne}from"./scroll-view.b0274f93.js";var W={},Tt=function(t,e,n){var i=s(t),a=n?i.scrollLeft():i.scrollTop(),l=n?"Width":"Height",_=i.prop("scroll".concat(l)),h=i.prop("client".concat(l)),g=_-h-a|0;if(a===0&&g===0)return!1;var S=a===0&&e>=0,U=g===0&&e<=0,v=a>0&&g>0;if(S||U||v)return!0},Re=function(t,e){var n=s(t);return{validate:function(i){if(qt(i)&&(a=i.target,e?s(a).is(t):!0))return Tt(n,-i.delta,i.shiftKey)?(i._needSkipEvent=!0,!0):!1;var a}}},Pe="dx-textarea",Me="dx-texteditor-input",$e="dx-texteditor-input-auto-resize",It=Zt.inherit({_getDefaultOptions:function(){return B(this.callBase(),{spellcheck:!0,minHeight:void 0,maxHeight:void 0,autoResizeEnabled:!1})},_initMarkup:function(){this.$element().addClass(Pe),this.callBase(),this.setAria("multiline","true")},_renderContentImpl:function(){this._updateInputHeight(),this.callBase()},_renderInput:function(){this.callBase(),this._renderScrollHandler()},_createInput:function(){var t=s("<textarea>");return this._applyInputAttributes(t,this.option("inputAttr")),this._updateInputAutoResizeAppearance(t),t},_applyInputAttributes:function(t,e){t.attr(e).addClass(Me)},_renderScrollHandler:function(){this._eventY=0;var t=this._input(),e=Re(t,!0);p.on(t,f(Qt.init,this.NAME),e,b),p.on(t,f(w.down,this.NAME),this._pointerDownHandler.bind(this)),p.on(t,f(w.move,this.NAME),this._pointerMoveHandler.bind(this))},_pointerDownHandler:function(t){this._eventY=ot(t).y},_pointerMoveHandler:function(t){var e=ot(t).y,n=this._eventY-e;Tt(this._input(),n)&&(t.isScrollingEvent=!0,t.stopPropagation()),this._eventY=e},_renderDimensions:function(){var t=this.$element(),e=t.get(0),n=this._getOptionValue("width",e),i=this._getOptionValue("height",e),a=this.option("minHeight"),l=this.option("maxHeight");t.css({minHeight:a!==void 0?a:"",maxHeight:l!==void 0?l:"",width:n,height:i})},_resetDimensions:function(){this.$element().css({height:"",minHeight:"",maxHeight:""})},_renderEvents:function(){this.option("autoResizeEnabled")&&p.on(this._input(),f("input paste",this.NAME),this._updateInputHeight.bind(this)),this.callBase()},_refreshEvents:function(){p.off(this._input(),f("input paste",this.NAME)),this.callBase()},_getHeightDifference(t){return K(this._$element.get(0),!1)+K(this._$textEditorContainer.get(0),!1)+K(this._$textEditorInputContainer.get(0),!1)+te("height",bt().getComputedStyle(t.get(0))).margin},_updateInputHeight:function(){if(!!ee()){var t=this._input(),e=this.option("height"),n=e===void 0&&this.option("autoResizeEnabled"),i=n||e===void 0&&this.option("minHeight");if(!i){t.css("height","");return}this._resetDimensions(),this._$element.css("height",N(this._$element)),t.css("height",0);var a=this._getHeightDifference(t);this._renderDimensions();var l=this._getBoundaryHeight("minHeight"),_=this._getBoundaryHeight("maxHeight"),h=t[0].scrollHeight;if(l!==void 0&&(h=Math.max(h,l-a)),_!==void 0){var g=_-a,S=h>g;h=Math.min(h,g),this._updateInputAutoResizeAppearance(t,!S)}t.css("height",h),n&&this._$element.css("height","auto")}},_getBoundaryHeight:function(t){var e=this.option(t);if(ne(e))return typeof e=="number"?e:ie(e,this.$element().get(0).parentElement)},_renderInputType:b,_visibilityChanged:function(t){t&&this._updateInputHeight()},_updateInputAutoResizeAppearance:function(t,e){if(t){var n=ae(e,this.option("autoResizeEnabled"));t.toggleClass($e,n)}},_dimensionChanged:function(){this.option("visible")&&this._updateInputHeight()},_optionChanged:function(t){switch(t.name){case"autoResizeEnabled":this._updateInputAutoResizeAppearance(this._input(),t.value),this._refreshEvents(),this._updateInputHeight();break;case"value":case"height":this.callBase(t),this._updateInputHeight();break;case"minHeight":case"maxHeight":this._renderDimensions(),this._updateInputHeight();break;case"visible":this.callBase(t),t.value&&this._updateInputHeight();break;default:this.callBase(t)}}});Ct("dxTextArea",It);const Le=Object.freeze(Object.defineProperty({__proto__:null,default:It},Symbol.toStringTag,{value:"Module"})),He=St(Le);/*!
 * devextreme-vue
 * Version: 22.1.5
 * Build date: Fri Sep 02 2022
 *
 * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */var Fe=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(W,"__esModule",{value:!0});W.DxTextArea=void 0;var ke=Fe(He),We=q,yt=We.createComponent({props:{accessKey:String,activeStateEnabled:Boolean,autoResizeEnabled:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,inputAttr:{},isValid:Boolean,label:String,labelMode:String,maxHeight:[Number,String],maxLength:[Number,String],minHeight:[Number,String],name:String,onChange:Function,onContentReady:Function,onCopy:Function,onCut:Function,onDisposing:Function,onEnterKey:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onInput:Function,onKeyDown:Function,onKeyUp:Function,onOptionChanged:Function,onPaste:Function,onValueChanged:Function,placeholder:String,readOnly:Boolean,rtlEnabled:Boolean,spellcheck:Boolean,stylingMode:String,tabIndex:Number,text:String,validationError:{},validationErrors:Array,validationMessageMode:String,validationStatus:String,value:String,valueChangeEvent:String,visible:Boolean,width:[Function,Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:autoResizeEnabled":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:inputAttr":null,"update:isValid":null,"update:label":null,"update:labelMode":null,"update:maxHeight":null,"update:maxLength":null,"update:minHeight":null,"update:name":null,"update:onChange":null,"update:onContentReady":null,"update:onCopy":null,"update:onCut":null,"update:onDisposing":null,"update:onEnterKey":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onInput":null,"update:onKeyDown":null,"update:onKeyUp":null,"update:onOptionChanged":null,"update:onPaste":null,"update:onValueChanged":null,"update:placeholder":null,"update:readOnly":null,"update:rtlEnabled":null,"update:spellcheck":null,"update:stylingMode":null,"update:tabIndex":null,"update:text":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationStatus":null,"update:value":null,"update:valueChangeEvent":null,"update:visible":null,"update:width":null},model:{prop:"value",event:"update:value"},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=ke.default,this.$_hasAsyncTemplate=!0}});W.DxTextArea=yt;var Ve=W.default=yt,d={},Bt={_menuEnabled:function(){return!!this._menuItems().length},_menuItems:function(){return this._list.option("menuItems")},_deleteEnabled:function(){return this._list.option("allowItemDeleting")},_fireMenuAction:function(t,e){this._list._itemEventHandlerByHandler(t,e,{},{excludeValidators:["disabled","readOnly"]})}},ut="dx-list-context-menu",Ue="dx-list-context-menucontent";E("menu","context",A.inherit({_init:function(){var t=s("<div>").addClass(ut);this._list.$element().append(t),this._menu=this._renderOverlay(t)},_renderOverlay:function(t){return this._list._createComponent(t,oe,{shading:!1,deferRendering:!0,hideOnParentScroll:!0,hideOnOutsideClick:function(e){return!s(e.target).closest("."+ut).length},animation:{show:{type:"slide",duration:300,from:{height:0,opacity:1},to:{height:function(){return N(this._$menuList)}.bind(this),opacity:1}},hide:{type:"slide",duration:0,from:{opacity:1},to:{opacity:0}}},_ignoreFunctionValueDeprecation:!0,height:function(){return this._$menuList?N(this._$menuList):0}.bind(this),width:function(){return F(this._list.$element())}.bind(this),onContentReady:this._renderMenuContent.bind(this)})},_renderMenuContent:function(t){var e=t.component.$content(),n=this._menuItems().slice();this._deleteEnabled()&&n.push({text:R.format("dxListEditDecorator-delete"),action:this._deleteItem.bind(this)}),this._$menuList=s("<div>"),this._list._createComponent(this._$menuList,_e,{items:n,onItemClick:this._menuItemClickHandler.bind(this),height:"auto",integrationOptions:{}}),e.addClass(Ue),e.append(this._$menuList)},_menuItemClickHandler:function(t){this._menu.hide(),this._fireMenuAction(this._$itemWithMenu,t.itemData.action)},_deleteItem:function(){this._list.deleteItem(this._$itemWithMenu)},handleContextMenu:function(t){return this._$itemWithMenu=t,this._menu.option({position:{my:"top",at:"bottom",of:t,collision:"flip"}}),this._menu.show(),!0},dispose:function(){this._menu&&this._menu.$element().remove(),this.callBase.apply(this,arguments)}}).include(Bt));var dt=A.abstract,At="dxListEditDecorator",ct=f(w.down,At),pt=f(Et,At),ze="dx-list-item-content",J="dx-list-switchable-delete-ready",Ge="dx-list-switchable-menu-shield-positioning",je="dx-list-switchable-delete-top-shield",Ke="dx-list-switchable-delete-bottom-shield",ht="dx-list-switchable-menu-item-shield-positioning",Ye="dx-list-switchable-delete-item-content-shield",Je="dx-list-switchable-delete-button-container",Ot=A.inherit({_init:function(){this._$topShield=s("<div>").addClass(je),this._$bottomShield=s("<div>").addClass(Ke),this._$itemContentShield=s("<div>").addClass(Ye),p.on(this._$topShield,ct,this._cancelDeleteReadyItem.bind(this)),p.on(this._$bottomShield,ct,this._cancelDeleteReadyItem.bind(this)),this._list.$element().append(this._$topShield.toggle(!1)).append(this._$bottomShield.toggle(!1))},handleClick:function(){return this._cancelDeleteReadyItem()},_cancelDeleteReadyItem:function(){return this._$readyToDeleteItem?(this._cancelDelete(this._$readyToDeleteItem),!0):!1},_cancelDelete:function(t){this._toggleDeleteReady(t,!1)},_toggleDeleteReady:function(t,e){e===void 0&&(e=!this._isReadyToDelete(t)),this._toggleShields(t,e),this._toggleScrolling(e),this._cacheReadyToDeleteItem(t,e),this._animateToggleDelete(t,e)},_isReadyToDelete:function(t){return t.hasClass(J)},_toggleShields:function(t,e){this._list.$element().toggleClass(Ge,e),this._$topShield.toggle(e),this._$bottomShield.toggle(e),e&&this._updateShieldsHeight(t),this._toggleContentShield(t,e)},_updateShieldsHeight:function(t){var e=this._list.$element(),n=e.offset().top,i=N(e),a=t.offset().top,l=N(t),_=a-n,h=i-l-_;lt(this._$topShield,Math.max(_,0)),lt(this._$bottomShield,Math.max(h,0))},_toggleContentShield:function(t,e){e?t.find("."+ze).first().append(this._$itemContentShield):this._$itemContentShield.detach()},_toggleScrolling:function(t){var e=this._list.$element().dxScrollView("instance");t?e.on("start",this._cancelScrolling):e.off("start",this._cancelScrolling)},_cancelScrolling:function(t){t.event.cancel=!0},_cacheReadyToDeleteItem:function(t,e){e?this._$readyToDeleteItem=t:delete this._$readyToDeleteItem},_animateToggleDelete:function(t,e){e?(this._enablePositioning(t),this._prepareDeleteReady(t),this._animatePrepareDeleteReady(t),p.off(t,w.up)):(this._forgetDeleteReady(t),this._animateForgetDeleteReady(t).done(this._disablePositioning.bind(this,t)))},_enablePositioning:function(t){t.addClass(ht),p.on(t,pt,b),p.one(t,w.up,this._disablePositioning.bind(this,t))},_disablePositioning:function(t){t.removeClass(ht),p.off(t,pt)},_prepareDeleteReady:function(t){t.addClass(J)},_forgetDeleteReady:function(t){t.removeClass(J)},_animatePrepareDeleteReady:dt,_animateForgetDeleteReady:dt,_getDeleteButtonContainer:function(t){return t=t||this._$readyToDeleteItem,t.children("."+Je)},_deleteItem:function(t){t=t||this._$readyToDeleteItem,this._getDeleteButtonContainer(t).detach(),!t.is(".dx-state-disabled, .dx-state-disabled *")&&this._list.deleteItem(t).always(this._cancelDelete.bind(this,t))},_isRtlEnabled:function(){return this._list.option("rtlEnabled")},dispose:function(){this._$topShield&&this._$topShield.remove(),this._$bottomShield&&this._$bottomShield.remove(),this.callBase.apply(this,arguments)}}),Xe="dx-list-switchable-delete-button-container",qe="dx-list-switchable-delete-button-wrapper",Ze="dx-list-switchable-delete-button-inner-wrapper",Qe="dx-list-switchable-delete-button",_t=200,wt=Ot.inherit({_init:function(){this.callBase.apply(this,arguments);var t=s("<div>").addClass(Xe),e=s("<div>").addClass(qe),n=s("<div>").addClass(Ze),i=s("<div>").addClass(Qe);this._list._createComponent(i,P,{text:R.format("dxListEditDecorator-delete"),type:"danger",onClick:function(a){this._deleteItem(),a.event.stopPropagation()}.bind(this),integrationOptions:{}}),t.append(e),e.append(n),n.append(i),this._$buttonContainer=t},_enablePositioning:function(t){this.callBase.apply(this,arguments),C.stop(this._$buttonContainer,!0),this._$buttonContainer.appendTo(t)},_disablePositioning:function(){this.callBase.apply(this,arguments),this._$buttonContainer.detach()},_animatePrepareDeleteReady:function(){var t=this._isRtlEnabled(),e=k(this._list.$element()),n=this._buttonWidth(),i=t?e:-n,a=t?e-n:0;return C.animate(this._$buttonContainer,{type:"custom",duration:_t,from:{right:i},to:{right:a}})},_animateForgetDeleteReady:function(){var t=this._isRtlEnabled(),e=k(this._list.$element()),n=this._buttonWidth(),i=t?e-n:0,a=t?e:-n;return C.animate(this._$buttonContainer,{type:"custom",duration:_t,from:{right:i},to:{right:a}})},_buttonWidth:function(){return this._buttonContainerWidth||(this._buttonContainerWidth=F(this._$buttonContainer)),this._buttonContainerWidth},dispose:function(){this._$buttonContainer&&this._$buttonContainer.remove(),this.callBase.apply(this,arguments)}}),tn="dx-list-toggle-delete-switch-container",en="dx-list-toggle-delete-switch";E("delete","toggle",wt.inherit({beforeBag:function(t){var e=t.$itemElement,n=t.$container,i=s("<div>").addClass(en);this._list._createComponent(i,P,{icon:"toggle-delete",onClick:function(a){C.stop(this._$buttonContainer,!1),this._toggleDeleteReady(e),a.event.stopPropagation()}.bind(this),integrationOptions:{}}),n.addClass(tn),n.append(i)}}));E("delete","slideButton",wt.inherit({_shouldHandleSwipe:!0,_swipeEndHandler:function(t,e){return e.targetOffset!==0&&(C.stop(this._$buttonContainer,!1),this._toggleDeleteReady(t)),!0}}));var y=bt(),nn="dx-actionsheet",an="dx-actionsheet-container",on="dx-actionsheet-popup-wrapper",ln="dx-actionsheet-popover-wrapper",sn="dx-actionsheet-cancel",rn="dx-actionsheet-item",un="dxActionSheetItemData",dn="dx-actionsheet-without-title",mt="outlined",Nt=le.inherit({_getDefaultOptions:function(){return B(this.callBase(),{usePopover:!1,target:null,title:"",showTitle:!0,showCancelButton:!0,cancelText:R.format("Cancel"),onCancelClick:null,visible:!1,noDataText:"",focusStateEnabled:!1,selectionByClick:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios",tablet:!0},options:{usePopover:!0}}])},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new se(function(t,e){var n=new P(s("<div>"),B({onClick:e&&e.click,stylingMode:e&&e.stylingMode||mt},e));t.append(n.$element())},["disabled","icon","text","type","onClick","click","stylingMode"],this.option("integrationOptions.watchMethod"))})},_itemContainer:function(){return this._$itemContainer},_itemClass:function(){return rn},_itemDataKey:function(){return un},_toggleVisibility:b,_renderDimensions:b,_initMarkup:function(){this.callBase(),this.$element().addClass(nn),this._createItemContainer()},_render:function(){this._renderPopup()},_createItemContainer:function(){this._$itemContainer=s("<div>").addClass(an),this._renderDisabled()},_renderDisabled:function(){this._$itemContainer.toggleClass("dx-state-disabled",this.option("disabled"))},_renderPopup:function(){this._$popup=s("<div>").appendTo(this.$element()),this._isPopoverMode()?this._createPopover():this._createPopup(),this._renderPopupTitle(),this._mapPopupOption("visible")},_mapPopupOption:function(t){this._popup&&this._popup.option(t,this.option(t))},_isPopoverMode:function(){return this.option("usePopover")&&this.option("target")},_renderPopupTitle:function(){this._mapPopupOption("showTitle"),this._popup&&this._popup.$wrapper().toggleClass(dn,!this.option("showTitle"))},_clean:function(){this._$popup&&this._$popup.remove(),this.callBase()},_overlayConfig:function(){return{onInitialized:function(t){this._popup=t.component}.bind(this),disabled:!1,showTitle:!0,title:this.option("title"),deferRendering:!y.angular,onContentReady:this._popupContentReadyAction.bind(this),onHidden:this.hide.bind(this)}},_createPopover:function(){this._createComponent(this._$popup,me,B(this._overlayConfig(),{width:this.option("width")||200,height:this.option("height")||"auto",target:this.option("target")})),this._popup.$wrapper().addClass(ln)},_createPopup:function(){this._createComponent(this._$popup,Xt,B(this._overlayConfig(),{dragEnabled:!1,width:this.option("width")||"100%",height:this.option("height")||"auto",showCloseButton:!1,position:{my:"bottom",at:"bottom",of:y},animation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom",of:y}},to:{position:{my:"bottom",at:"bottom",of:y}}},hide:{type:"slide",duration:400,from:{position:{my:"bottom",at:"bottom",of:y}},to:{position:{my:"top",at:"bottom",of:y}}}}})),this._popup.$wrapper().addClass(on)},_popupContentReadyAction:function(){this._popup.$content().append(this._$itemContainer),this._attachClickEvent(),this._attachHoldEvent(),this._prepareContent(),this._renderContent(),this._renderCancelButton()},_renderCancelButton:function(){if(!this._isPopoverMode()&&(this._$cancelButton&&this._$cancelButton.remove(),this.option("showCancelButton"))){var t=this._createActionByOption("onCancelClick")||b,e=this;this._$cancelButton=s("<div>").addClass(sn).appendTo(this._popup&&this._popup.$content()),this._createComponent(this._$cancelButton,P,{disabled:!1,stylingMode:mt,text:this.option("cancelText"),onClick:function(n){var i={event:n,cancel:!1};t(i),i.cancel||e.hide()},integrationOptions:{}})}},_attachItemClickEvent:b,_itemClickHandler:function(t){this.callBase(t),s(t.target).is(".dx-state-disabled, .dx-state-disabled *")||this.hide()},_itemHoldHandler:function(t){this.callBase(t),s(t.target).is(".dx-state-disabled, .dx-state-disabled *")||this.hide()},_optionChanged:function(t){switch(t.name){case"width":case"height":case"visible":case"title":this._mapPopupOption(t.name);break;case"disabled":this._renderDisabled();break;case"showTitle":this._renderPopupTitle();break;case"showCancelButton":case"onCancelClick":case"cancelText":this._renderCancelButton();break;case"target":case"usePopover":case"items":this._invalidate();break;default:this.callBase(t)}},toggle:function(t){var e=this,n=new Dt;return e._popup.toggle(t).done(function(){e.option("visible",t),n.resolveWith(e)}),n.promise()},show:function(){return this.toggle(!0)},hide:function(){return this.toggle(!1)}});Ct("dxActionSheet",Nt);var Rt="dxListEditDecorator",gt=f(ue,Rt),cn=f(Et,Rt),pn="dx-list-slide-menu",hn="dx-list-slide-menu-wrapper",X="dx-list-slide-menu-content",_n="dx-list-slide-menu-buttons-container",mn="dx-list-slide-menu-buttons",ft="dx-list-slide-menu-button",gn="dx-list-slide-menu-button-menu",fn="dx-list-slide-menu-button-delete",vn=400,bn="cubic-bezier(0.075, 0.82, 0.165, 1)";E("menu","slide",Ot.inherit({_shouldHandleSwipe:!0,_init:function(){this.callBase.apply(this,arguments),this._$buttonsContainer=s("<div>").addClass(_n),p.on(this._$buttonsContainer,cn,b),this._$buttons=s("<div>").addClass(mn).appendTo(this._$buttonsContainer),this._renderMenu(),this._renderDeleteButton()},_renderMenu:function(){if(!!this._menuEnabled()){var t=this._menuItems();if(t.length===1){var e=t[0];this._renderMenuButton(e.text,function(a){a.stopPropagation(),this._fireAction(e)}.bind(this))}else{var n=s("<div>").addClass(pn);this._menu=this._list._createComponent(n,Nt,{showTitle:!1,items:t,onItemClick:function(a){this._fireAction(a.itemData)}.bind(this),integrationOptions:{}}),n.appendTo(this._list.$element());var i=this._renderMenuButton(R.format("dxListEditDecorator-more"),function(a){a.stopPropagation(),this._menu.show()}.bind(this));this._menu.option("target",i)}}},_renderMenuButton:function(t,e){var n=s("<div>").addClass(ft).addClass(gn).text(t);return this._$buttons.append(n),p.on(n,gt,e),n},_renderDeleteButton:function(){if(!!this._deleteEnabled()){var t=s("<div>").addClass(ft).addClass(fn).text(re()?"":R.format("dxListEditDecorator-delete"));p.on(t,gt,function(e){e.stopPropagation(),this._deleteItem()}.bind(this)),this._$buttons.append(t)}},_fireAction:function(t){this._fireMenuAction(s(this._cachedNode),t.action),this._cancelDeleteReadyItem()},modifyElement:function(t){this.callBase.apply(this,arguments);var e=t.$itemElement;e.addClass(hn);var n=s("<div>").addClass(X);e.wrapInner(n)},_getDeleteButtonContainer:function(){return this._$buttonsContainer},handleClick:function(t,e){return s(e.target).closest("."+X).length?this.callBase.apply(this,arguments):!1},_swipeStartHandler:function(t){this._enablePositioning(t),this._cacheItemData(t),this._setPositions(this._getPositions(0))},_swipeUpdateHandler:function(t,e){var n=this._isRtlEnabled(),i=n?-1:1,a=this._isReadyToDelete(t),l=this._getCurrentPositions().content===this._getStartPositions().content;if(l&&!a&&e.offset*i>0){e.cancel=!0;return}var _=this._cachedItemWidth*e.offset,h=a?-this._cachedButtonWidth*i:0,g=(_+h)*i,S=g<0?Math.abs((_+h)/this._cachedButtonWidth):0;return this._setPositions(this._getPositions(S)),!0},_getStartPositions:function(){var t=this._isRtlEnabled(),e=t?-1:1;return{content:0,buttonsContainer:t?-this._cachedButtonWidth:this._cachedItemWidth,buttons:-this._cachedButtonWidth*e}},_getPositions:function(t){var e=this._isRtlEnabled(),n=e?-1:1,i=this._getStartPositions();return{content:i.content-t*this._cachedButtonWidth*n,buttonsContainer:i.buttonsContainer-Math.min(t,1)*this._cachedButtonWidth*n,buttons:i.buttons+Math.min(t,1)*this._cachedButtonWidth*n}},_getCurrentPositions:function(){return{content:Y(this._$cachedContent).left,buttonsContainer:Y(this._$buttonsContainer).left,buttons:Y(this._$buttons).left}},_setPositions:function(t){L(this._$cachedContent,{left:t.content}),L(this._$buttonsContainer,{left:t.buttonsContainer}),L(this._$buttons,{left:t.buttons})},_cacheItemData:function(t){t[0]!==this._cachedNode&&(this._$cachedContent=t.find("."+X),this._cachedItemWidth=F(t),this._cachedButtonWidth=this._cachedButtonWidth||F(this._$buttons),xt(this._$buttonsContainer,this._cachedButtonWidth),this._$cachedContent.length&&(this._cachedNode=t[0]))},_minButtonContainerLeftOffset:function(){return this._cachedItemWidth-this._cachedButtonWidth},_swipeEndHandler:function(t,e){this._cacheItemData(t);var n=this._isRtlEnabled()?1:-1,i=this._cachedItemWidth*e.offset,a=!this._isReadyToDelete(t)&&i*n>.2*this._cachedButtonWidth,l=e.targetOffset===n&&a;return this._toggleDeleteReady(t,l),!0},_enablePositioning:function(t){C.stop(this._$cachedContent,!0),this.callBase.apply(this,arguments),this._$buttonsContainer.appendTo(t)},_disablePositioning:function(){this.callBase.apply(this,arguments),this._$buttonsContainer.detach()},_animatePrepareDeleteReady:function(){return this._animateToPositions(this._getPositions(1))},_animateForgetDeleteReady:function(t){return this._cacheItemData(t),this._animateToPositions(this._getPositions(0))},_animateToPositions:function(t){var e=this,n=this._getCurrentPositions(),i=Math.min(Math.abs(n.content-t.content)/this._cachedButtonWidth,1);return C.animate(this._$cachedContent,{from:n,to:t,easing:bn,duration:vn*i,strategy:"frame",draw:function(a){e._setPositions(a)}})},dispose:function(){this._menu&&this._menu.$element().remove(),this._$buttonsContainer&&this._$buttonsContainer.remove(),this.callBase.apply(this,arguments)}}).include(Bt));var Cn="dx-list-static-delete-button-container",Sn="dx-list-static-delete-button";E("delete","static",A.inherit({afterBag:function(t){var e=t.$itemElement,n=t.$container,i=s("<div>").addClass(Sn);this._list._createComponent(i,P,{icon:"remove",onClick:function(a){a.event.stopPropagation(),this._deleteItem(e)}.bind(this),integrationOptions:{}}),n.addClass(Cn).append(i)},_deleteItem:function(t){t.is(".dx-state-disabled, .dx-state-disabled *")||this._list.deleteItem(t)}}));E("delete","swipe",A.inherit({_shouldHandleSwipe:!0,_renderItemPosition:function(t,e,n){var i=new Dt,a=e*this._itemElementWidth;return n?C.animate(t,{to:{left:a},type:"slide",complete:function(){i.resolve(t,e)}}):(L(t,{left:a}),i.resolve()),i.promise()},_swipeStartHandler:function(t){return this._itemElementWidth=k(t),!0},_swipeUpdateHandler:function(t,e){return this._renderItemPosition(t,e.offset),!0},_swipeEndHandler:function(t,e){var n=e.targetOffset;return this._renderItemPosition(t,n,!0).done(function(i,a){Math.abs(a)&&this._list.deleteItem(i).fail(function(){this._renderItemPosition(i,0,!0)}.bind(this))}.bind(this)),!0}}));var En="dx-list-reorder-handle-container",vt="dx-list-reorder-handle",Dn="dx-list-item-ghost-reordering",xn="dx-state-hover";E("reorder","default",A.inherit({_init:function(){var t=this._list;this._groupedEnabled=this._list.option("grouped"),this._lockedDrag=!1;var e=this._groupedEnabled?"> .dx-list-group > .dx-list-group-body > .dx-list-item":"> .dx-list-item";this._sortable=t._createComponent(t._scrollView.content(),ge,B({component:t,contentTemplate:null,allowReordering:!1,filter:e,container:t.$element(),dragDirection:t.option("itemDragging.group")?"both":"vertical",handle:".".concat(vt),dragTemplate:this._dragTemplate,onDragStart:this._dragStartHandler.bind(this),onDragChange:this._dragChangeHandler.bind(this),onReorder:this._reorderHandler.bind(this)},t.option("itemDragging")))},afterRender:function(){this._sortable.update()},_dragTemplate:function(t){var e=s(t.itemElement).clone().addClass(Dn).addClass(xn);return xt(e,k(t.itemElement)),e},_dragStartHandler:function(t){if(this._lockedDrag){t.cancel=!0;return}},_dragChangeHandler:function(t){if(this._groupedEnabled&&!this._sameParent(t.fromIndex,t.toIndex)){t.cancel=!0;return}},_sameParent:function(t,e){var n=this._list.getItemElementByFlatIndex(t),i=this._list.getItemElementByFlatIndex(e);return i.parent().get(0)===n.parent().get(0)},_reorderHandler:function(t){var e=this._list.getItemElementByFlatIndex(t.toIndex);this._list.reorderItem(s(t.itemElement),e)},afterBag:function(t){var e=s("<div>").addClass(vt);p.on(e,"dxpointerdown",n=>{this._lockedDrag=!de(n)}),p.on(e,"dxhold",{timeout:30},n=>{n.cancel=!0,this._lockedDrag=!1}),t.$container.addClass(En).append(e)}}));const Tn=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"})),In=St(Tn);/*!
 * devextreme-vue
 * Version: 22.1.5
 * Build date: Fri Sep 02 2022
 *
 * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */var yn=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d,"__esModule",{value:!0});d.DxSearchEditorOptions=d.DxOptions=d.DxMenuItem=d.DxItemDragging=d.DxItem=d.DxCursorOffset=d.DxButton=d.DxList=void 0;var Bn=yn(In),An=q,D=q,Pt=An.createComponent({props:{accessKey:String,activeStateEnabled:Boolean,allowItemDeleting:Boolean,bounceEnabled:Boolean,collapsibleGroups:Boolean,dataSource:{},disabled:Boolean,displayExpr:[Function,String],elementAttr:Object,focusStateEnabled:Boolean,grouped:Boolean,groupTemplate:{},height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,indicateLoading:Boolean,itemDeleteMode:String,itemDragging:Object,itemHoldTimeout:Number,items:Array,itemTemplate:{},keyExpr:[Function,String],menuItems:Array,menuMode:String,nextButtonText:String,noDataText:String,onContentReady:Function,onDisposing:Function,onGroupRendered:Function,onInitialized:Function,onItemClick:Function,onItemContextMenu:Function,onItemDeleted:Function,onItemDeleting:Function,onItemHold:Function,onItemRendered:Function,onItemReordered:Function,onItemSwipe:Function,onOptionChanged:Function,onPageLoading:Function,onPullRefresh:Function,onScroll:Function,onSelectAllValueChanged:Function,onSelectionChanged:Function,pageLoadingText:String,pageLoadMode:String,pulledDownText:String,pullingDownText:String,pullRefreshEnabled:Boolean,refreshingText:String,repaintChangesOnly:Boolean,rtlEnabled:Boolean,scrollByContent:Boolean,scrollByThumb:Boolean,scrollingEnabled:Boolean,searchEditorOptions:Object,searchEnabled:Boolean,searchExpr:[Array,Function,String],searchMode:String,searchTimeout:Number,searchValue:String,selectAllMode:String,selectAllText:String,selectedItemKeys:Array,selectedItems:Array,selectionMode:String,showScrollbar:String,showSelectionControls:Boolean,tabIndex:Number,useNativeScrolling:Boolean,visible:Boolean,width:[Function,Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:allowItemDeleting":null,"update:bounceEnabled":null,"update:collapsibleGroups":null,"update:dataSource":null,"update:disabled":null,"update:displayExpr":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:grouped":null,"update:groupTemplate":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:indicateLoading":null,"update:itemDeleteMode":null,"update:itemDragging":null,"update:itemHoldTimeout":null,"update:items":null,"update:itemTemplate":null,"update:keyExpr":null,"update:menuItems":null,"update:menuMode":null,"update:nextButtonText":null,"update:noDataText":null,"update:onContentReady":null,"update:onDisposing":null,"update:onGroupRendered":null,"update:onInitialized":null,"update:onItemClick":null,"update:onItemContextMenu":null,"update:onItemDeleted":null,"update:onItemDeleting":null,"update:onItemHold":null,"update:onItemRendered":null,"update:onItemReordered":null,"update:onItemSwipe":null,"update:onOptionChanged":null,"update:onPageLoading":null,"update:onPullRefresh":null,"update:onScroll":null,"update:onSelectAllValueChanged":null,"update:onSelectionChanged":null,"update:pageLoadingText":null,"update:pageLoadMode":null,"update:pulledDownText":null,"update:pullingDownText":null,"update:pullRefreshEnabled":null,"update:refreshingText":null,"update:repaintChangesOnly":null,"update:rtlEnabled":null,"update:scrollByContent":null,"update:scrollByThumb":null,"update:scrollingEnabled":null,"update:searchEditorOptions":null,"update:searchEnabled":null,"update:searchExpr":null,"update:searchMode":null,"update:searchTimeout":null,"update:searchValue":null,"update:selectAllMode":null,"update:selectAllText":null,"update:selectedItemKeys":null,"update:selectedItems":null,"update:selectionMode":null,"update:showScrollbar":null,"update:showSelectionControls":null,"update:tabIndex":null,"update:useNativeScrolling":null,"update:visible":null,"update:width":null},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=Bn.default,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={item:{isCollectionItem:!0,optionName:"items"},itemDragging:{isCollectionItem:!1,optionName:"itemDragging"},menuItem:{isCollectionItem:!0,optionName:"menuItems"},searchEditorOptions:{isCollectionItem:!1,optionName:"searchEditorOptions"}}}});d.DxList=Pt;var V=D.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:location":null,"update:name":null,"update:options":null},props:{location:String,name:String,options:Object}});d.DxButton=V;V.$_optionName="buttons";V.$_isCollectionItem=!0;V.$_expectedChildren={options:{isCollectionItem:!1,optionName:"options"}};var Mt=D.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});d.DxCursorOffset=Mt;Mt.$_optionName="cursorOffset";var Z=D.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:badge":null,"update:disabled":null,"update:html":null,"update:icon":null,"update:showChevron":null,"update:template":null,"update:text":null,"update:visible":null},props:{badge:String,disabled:Boolean,html:String,icon:String,showChevron:Boolean,template:{},text:String,visible:Boolean}});d.DxItem=Z;Z.$_optionName="items";Z.$_isCollectionItem=!0;var Q=D.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowDropInsideItem":null,"update:allowReordering":null,"update:autoScroll":null,"update:bindingOptions":null,"update:boundary":null,"update:container":null,"update:contentTemplate":null,"update:cursorOffset":null,"update:data":null,"update:dragDirection":null,"update:dragTemplate":null,"update:dropFeedbackMode":null,"update:elementAttr":null,"update:filter":null,"update:group":null,"update:handle":null,"update:height":null,"update:itemOrientation":null,"update:moveItemOnDrop":null,"update:onAdd":null,"update:onDisposing":null,"update:onDragChange":null,"update:onDragEnd":null,"update:onDragMove":null,"update:onDragStart":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onPlaceholderPrepared":null,"update:onRemove":null,"update:onReorder":null,"update:rtlEnabled":null,"update:scrollSensitivity":null,"update:scrollSpeed":null,"update:width":null},props:{allowDropInsideItem:Boolean,allowReordering:Boolean,autoScroll:Boolean,bindingOptions:Object,boundary:{},container:{},contentTemplate:{},cursorOffset:[Object,String],data:{},dragDirection:String,dragTemplate:{},dropFeedbackMode:String,elementAttr:Object,filter:String,group:String,handle:String,height:[Function,Number,String],itemOrientation:String,moveItemOnDrop:Boolean,onAdd:Function,onDisposing:Function,onDragChange:Function,onDragEnd:Function,onDragMove:Function,onDragStart:Function,onInitialized:Function,onOptionChanged:Function,onPlaceholderPrepared:Function,onRemove:Function,onReorder:Function,rtlEnabled:Boolean,scrollSensitivity:Number,scrollSpeed:Number,width:[Function,Number,String]}});d.DxItemDragging=Q;Q.$_optionName="itemDragging";Q.$_expectedChildren={cursorOffset:{isCollectionItem:!1,optionName:"cursorOffset"}};var tt=D.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:action":null,"update:text":null},props:{action:Function,text:String}});d.DxMenuItem=tt;tt.$_optionName="menuItems";tt.$_isCollectionItem=!0;var $t=D.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:bindingOptions":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:icon":null,"update:onClick":null,"update:onContentReady":null,"update:onDisposing":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:stylingMode":null,"update:tabIndex":null,"update:template":null,"update:text":null,"update:type":null,"update:useSubmitBehavior":null,"update:validationGroup":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,bindingOptions:Object,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Function,Number,String]}});d.DxOptions=$t;$t.$_optionName="options";var et=D.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:bindingOptions":null,"update:buttons":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:inputAttr":null,"update:isValid":null,"update:label":null,"update:labelMode":null,"update:mask":null,"update:maskChar":null,"update:maskInvalidMessage":null,"update:maskRules":null,"update:maxLength":null,"update:mode":null,"update:name":null,"update:onChange":null,"update:onContentReady":null,"update:onCopy":null,"update:onCut":null,"update:onDisposing":null,"update:onEnterKey":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onInput":null,"update:onKeyDown":null,"update:onKeyUp":null,"update:onOptionChanged":null,"update:onPaste":null,"update:onValueChanged":null,"update:placeholder":null,"update:readOnly":null,"update:rtlEnabled":null,"update:showClearButton":null,"update:showMaskMode":null,"update:spellcheck":null,"update:stylingMode":null,"update:tabIndex":null,"update:text":null,"update:useMaskedValue":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationStatus":null,"update:value":null,"update:valueChangeEvent":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,bindingOptions:Object,buttons:Array,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,inputAttr:{},isValid:Boolean,label:String,labelMode:String,mask:String,maskChar:String,maskInvalidMessage:String,maskRules:{},maxLength:[Number,String],mode:String,name:String,onChange:Function,onContentReady:Function,onCopy:Function,onCut:Function,onDisposing:Function,onEnterKey:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onInput:Function,onKeyDown:Function,onKeyUp:Function,onOptionChanged:Function,onPaste:Function,onValueChanged:Function,placeholder:String,readOnly:Boolean,rtlEnabled:Boolean,showClearButton:Boolean,showMaskMode:String,spellcheck:Boolean,stylingMode:String,tabIndex:Number,text:String,useMaskedValue:Boolean,validationError:{},validationErrors:Array,validationMessageMode:String,validationStatus:String,value:String,valueChangeEvent:String,visible:Boolean,width:[Function,Number,String]}});d.DxSearchEditorOptions=et;et.$_optionName="searchEditorOptions";et.$_expectedChildren={button:{isCollectionItem:!0,optionName:"buttons"}};var On=d.default=Pt;const wn={components:{DxDataGrid:ve,DxColumn:be,DxFilterRow:Ce,DxGrouping:Se,DxGroupPanel:Ee,DxSearchPanel:De,DxHeaderFilter:xe,DxScrolling:Te,DxGridToolbar:Ie,DxItem:ye,DxSelectBox:Oe,DxGridButton:Be,DxPopup:zt,DxToolbarItem:Gt,DxTextBox:jt,DxButton:we,DxTextArea:Ve,DxScrollView:Ne,DxList:On},data:()=>({showPopup:!1,crudTitle:"Detalle de Incidencia",items:[],sectors:[],incidentTypes:[],model:{type:{}},filterState:"OPEN"}),mounted(){this.listOpen(),this.loadAllSelects()},methods:{formatTimestamp(t){return pe(t,"dd/MM/yyyy HH:mm")},async loadAllSelects(){this.sectors=await Yt(),this.incidentTypes=await Jt()},create(){let t=Kt();this.model={status:"IN_PROCESS",userName:t.fullName,user:{intranet:!0,name:t.fullName},registerDate:"AHORA",type:{id:null}},this.showPopup=!0},listOpen(){let t=[{field:"status",operator:"==",value:"OPEN"}];this.listAll(t)},onClosePopup(){this.showPopup=!1},getStatus(t){switch(t){case"OPEN":return{name:"Abierta",color:"white",backgroundColor:"#03A9F0"};case"IN_PROCESS":return{name:"En Proceso",color:"white",backgroundColor:"#8bc34a"};case"CLOSED":return{name:"Cerrada",color:"white",backgroundColor:"#333"};case"REJECTED":return{name:"Rechazada",color:"white",backgroundColor:"#f44336"};default:return{}}},async createAndStart(){let t=Object.assign({},this.model),e=this.incidentTypes.filter(i=>i.id==t.type.id).pop();t.registerDate=j(),t.type=e;let n=t.sector;t.sector=n.name,t.status="IN_PROCESS",t.history=t.history||{},t.history.OPEN=j(),t.history[t.status]=j(),await it(t),t.id&&(at("Registro guardado con \xE9xito","success",3e3),this.listCurrentStatus(),this.showPopup=!1)},start(){this.update("IN_PROCESS")},reject(){this.update("REJECTED")},close(){this.update("CLOSED")},update(t){Ae("Seguro deseas cambiar el estado","Confirmar").then(n=>{if(n){let i=Object.assign({},this.model);i.status=t;let a=this.incidentTypes.filter(_=>_.id==i.type.id).pop();i.type=a;let l=i.sector;i.sector=l.name,i.history=i.history||{},i.history[t]=new Date,it(i),this.showPopup=!1,this.listCurrentStatus(),at("Cambio realizado con \xE9xito "+t,"success",3e3)}})},listCurrentStatus(){let t=[{field:"status",operator:"==",value:this.filterState}];this.listAll(t)},showDetail(t){let e=Object.assign({},t),n=this.incidentTypes.filter(a=>a.id==e.type.id).pop(),i=this.sectors.filter(a=>a.name==e.sector).pop();if(e.type=n,e.sector=i,this.model=e,e.location){const a={lat:e.location.latitude,lng:e.location.longitude},l=new google.maps.Map(document.getElementById("map"),{zoom:5,center:a});new google.maps.Marker({position:a,map:l})}console.log(this.model),this.showPopup=!0},async listAll(t){this.items=await Ut(t)},filterChange(t){let e=t.value,n=[{field:"status",operator:"==",value:e}];this.listAll(n)}}},Nn={style:{padding:"10px",width:"100vw","box-sizing":"border-box"}},Rn=o("label",{style:{"font-size":"1.2em","margin-bottom":"5px"}},"Incidencias",-1),Pn=["onClick"],Mn=o("i",{class:"dx-icon-doc"},null,-1),$n={class:"dx-field"},Ln=o("div",{class:"dx-field-label"},"Sector",-1),Hn={class:"dx-field-value"},Fn={class:"dx-field"},kn=o("div",{class:"dx-field-label"},"Tipo",-1),Wn={class:"dx-field-value"},Vn={class:"dx-field"},Un=o("div",{class:"dx-field-label"},"Estado",-1),zn={class:"dx-field-value"},Gn={class:"dx-field"},jn=o("div",{class:"dx-field-label"},"Descripci\xF3n",-1),Kn={class:"dx-field-value"},Yn={class:"dx-field"},Jn=o("div",{class:"dx-field-label"},"Ubicaci\xF3n",-1),Xn={class:"dx-field-value"},qn={class:"dx-field"},Zn=o("div",{class:"dx-field-label"},"Registrado por",-1),Qn={class:"dx-field-value"},ti={class:"dx-field"},ei=o("div",{class:"dx-field-label"},"Registrado",-1),ni={class:"dx-field-value"},ii={class:"dx-field"},ai=o("div",{class:"dx-field-label"},"Adjuntos",-1),oi={class:"dx-field-value"},li=["href"];function si(t,e,n,i,a,l){const _=c("DxFilterRow"),h=c("DxHeaderFilter"),g=c("DxSearchPanel"),S=c("DxScrolling"),U=c("DxGroupPanel"),v=c("DxColumn"),z=c("DxItem"),Lt=c("DxGridToolbar"),nt=c("DxButton"),G=c("DxSelectBox"),Ht=c("DxDataGrid"),Ft=c("DxTextArea"),kt=c("DxList"),Wt=c("DxScrollView"),M=c("DxToolbarItem"),Vt=c("DxPopup");return x(),st("div",Nn,[Rn,r(Ht,{id:"dataGrid",ref:"dataGridRef","data-source":t.items,"key-expr":"id","show-borders":!0,height:"calc(100vh - 72px)",width:"100%","allow-column-resizing":!0},{typeTemplate:m(({data:u})=>[o("span",{style:I({backgroundColor:u.data.type.backgroundColor,color:u.data.type.foregroundColor,padding:"5px",borderRadius:"15px"})},[o("i",{class:he(u.data.type.icon)},null,2),rt(" "+T(u.data.type.name),1)],4)]),timestampTemplate:m(({data:u})=>[o("span",null,T(u.data.registerDate?l.formatTimestamp(u.data.registerDate.toDate()):"-"),1)]),buttonsTemplate:m(({data:u})=>[o("a",{onClick:ri=>l.showDetail(u.data),style:{cursor:"pointer",color:"blue"}},[Mn,rt("\xA0Ver")],8,Pn)]),createButton:m(()=>[r(nt,{icon:"add",onClick:l.create,text:"Crear",type:"default"},null,8,["onClick"])]),byStatusFilter:m(()=>[r(G,{width:"200","display-expr":"text","value-expr":"value",modelValue:t.filterState,"onUpdate:modelValue":e[0]||(e[0]=u=>t.filterState=u),items:[{value:"OPEN",text:"Abiertas"},{value:"IN_PROCESS",text:"En proceso"},{value:"CLOSED",text:"Cerradas"},{value:"REJECTED",text:"Rechazadas"}],onValueChanged:l.filterChange},null,8,["modelValue","onValueChanged"])]),refreshButton:m(()=>[r(nt,{icon:"refresh",onClick:l.listCurrentStatus},null,8,["onClick"])]),default:m(()=>[r(_,{visible:!0}),r(h,{visible:!0}),r(g,{visible:!0,width:240,placeholder:"Buscar..."}),r(S,{mode:"virtual"}),r(U,{visible:!0}),r(v,{width:"200",caption:"Tipo","cell-template":"typeTemplate","data-field":"type.name","sort-order":"asc"}),r(v,{width:"120","data-field":"sector",caption:"Sector","sort-order":"asc"}),r(v,{"data-field":"description",caption:"Descripci\xF3n"}),r(v,{width:"150","data-field":"userName",caption:"Registrado por"}),r(v,{width:"140","data-field":"registerDate",caption:"Fecha","sort-order":"asc","cell-template":"timestampTemplate"}),r(v,{type:"buttons",width:110,"cell-template":"buttonsTemplate"}),r(Lt,null,{default:m(()=>[r(z,{location:"before",template:"createButton"}),r(z,{location:"after",template:"byStatusFilter"}),r(z,{location:"after",template:"refreshButton"})]),_:1})]),_:1},8,["data-source"]),r(Vt,{visible:t.showPopup,"drag-enabled":!0,"hide-on-outside-click":!1,"show-close-button":!0,"show-title":!0,width:400,height:400,title:t.crudTitle,"on-hidden":l.onClosePopup},{default:m(()=>[r(Wt,{height:"calc(400px - 135px)"},{default:m(()=>[o("div",$n,[Ln,o("div",Hn,[r(G,{modelValue:t.model.sector,"onUpdate:modelValue":e[1]||(e[1]=u=>t.model.sector=u),"data-source":t.sectors,"display-value":"name","display-expr":"name"},null,8,["modelValue","data-source"])])]),o("div",Fn,[kn,o("div",Wn,[r(G,{modelValue:t.model.type,"onUpdate:modelValue":e[2]||(e[2]=u=>t.model.type=u),"data-source":t.incidentTypes,"display-value":"id","display-expr":"name"},null,8,["modelValue","data-source"])])]),o("div",Vn,[Un,o("div",zn,[o("label",{style:I({lineHeight:"2.5em",color:l.getStatus(t.model.status).color,backgroundColor:l.getStatus(t.model.status).backgroundColor,padding:"5px",borderRadius:"15px"})},T(l.getStatus(t.model.status).name),5)])]),o("div",Gn,[jn,o("div",Kn,[r(Ft,{height:90,modelValue:t.model.description,"onUpdate:modelValue":e[3]||(e[3]=u=>t.model.description=u)},null,8,["modelValue"])])]),o("div",Yn,[Jn,o("div",Xn,[t.model.location?O("",!0):(x(),st("label",{key:0,style:I({lineHeight:"2.5em"})},T(t.model.userName),5)),o("div",{id:"map",style:I({width:"100%",height:"300px",display:t.model.location?"block":"none"})},null,4)])]),o("div",qn,[Zn,o("div",Qn,[o("label",{style:I({lineHeight:"2.5em"})},T(t.model.userName),5)])]),o("div",ti,[ei,o("div",ni,[o("label",{style:I({lineHeight:"2.5em"})},T(t.model.id?l.formatTimestamp(t.model.registerDate.toDate()):"AHORA"),5)])]),o("div",ii,[ai,o("div",oi,[r(kt,{"data-source":t.model.media},{item:m(({data:u})=>[o("a",{href:u,target:"_blank"},"Ver Adjunto",8,li)]),_:1},8,["data-source"])])])]),_:1}),t.model.status=="IN_PROCESS"&&!t.model.id?(x(),$(M,{key:0,widget:"dxButton",toolbar:"bottom",location:"after",options:{text:"Crear e Iniciar",type:"success",onClick:l.createAndStart}},null,8,["options"])):O("",!0),t.model.status=="OPEN"&&t.model.id?(x(),$(M,{key:1,widget:"dxButton",toolbar:"bottom",location:"after",options:{text:"Iniciar",type:"success",onClick:l.start}},null,8,["options"])):O("",!0),t.model.status=="IN_PROCESS"&&t.model.id?(x(),$(M,{key:2,widget:"dxButton",toolbar:"bottom",location:"after",options:{text:"Cerrar",type:"default",onClick:l.close}},null,8,["options"])):O("",!0),t.model.status=="OPEN"&&t.model.id?(x(),$(M,{key:3,widget:"dxButton",toolbar:"bottom",location:"before",options:{text:"Rechazar",type:"danger",onClick:l.reject}},null,8,["options"])):O("",!0)]),_:1},8,["visible","title","on-hidden"])])}const fi=ce(wn,[["render",si]]);export{fi as default};
