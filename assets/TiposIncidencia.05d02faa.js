import{_ as k,a as w,s as I,l as T,y as _,R as S,D as N}from"./plugin-vue_export-helper.5a311d7c.js";import{s as V,a as B,b as E,c as R,d as U,e as F,f as P,g as A,h as q,i as z,j as M}from"./radiobutton.esm.1f7f892c.js";import{s as O,g as j,h as r,o as p,c as u,a as t,j as d,d as a,t as G,n as v,i as g,W as H}from"./index.841e0e4e.js";import{s as K}from"./password.esm.707efee9.js";import{s as W}from"./checkbox.esm.22e5aec5.js";const J={components:{Button:O,Dialog:V,FileUpload:B,InputText:w,Toolbar:E,DataTable:R,Column:U,Toast:I,Rating:F,Textarea:P,Dropdown:A,RadioButton:q,InputNumber:z,ScrollPanel:M,Password:K,Checkbox:W},data(){return{title:"Tipos de Incidencia",items:null,showDialog:!1,deleteDialog:!1,model:{},selectedItems:null,filters:{},submitted:!1,fireStore:null}},mounted(){let i=this;this.getFromFirestore(i)},methods:{getFromFirestore:async i=>{let h=j().appContext.config.globalProperties.$firebaseApp,m=T(h);i.fireStore=m;let e=_(m,"IncidentTypes"),n=await S(e);i.items=n.docs.map(c=>{let o=c.data();return o.id=c.id,o})},openNew(){this.model={},this.submitted=!1,this.showDialog=!0},hideDialog(){this.showDialog=!1,this.submitted=!1},async save(){if(this.submitted=!0,!this.model.name.trim())this.$toast.add({severity:"warn",summary:"Incompleto",detail:"Datos incompletos",life:3e3});else{if(this.model.id)this.$toast.add({severity:"success",summary:"Ok",detail:"Actualizado correctamente",life:3e3});else{this.model.active=!0;let i=await N(_(this.fireStore,"IncidentTypes"),this.model);this.model.id=i.id,this.items.push(this.model),this.$toast.add({severity:"success",summary:"Ok",detail:"Registro creado",life:3e3})}this.showDialog=!1,this.model={}}},openEdit(i){this.model={...i},this.showDialog=!0},confirmDeleteSelected(){this.deleteDialog=!0},deleteSelectedItems(){this.items=this.items.filter(i=>i.id!==this.model.id),this.deleteDialog=!1,this.model={},this.$toast.add({severity:"success",summary:"Ok",detail:"Item eliminado",life:3e3})}}},L={class:"muniform"},Q={class:"container"},X={class:"container"},Y={class:"container"},Z={class:"field"},$=a("label",{for:"name"},"Nombre",-1),ee={key:0,class:"p-error"},te={class:"field"},se=a("label",{for:"active"},"Activo",-1),ie=H(' Checkbox inputId="binary" v-model="checked" :binary="true" /> '),le={class:"confirmation-content"},oe=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ae={key:0};function ne(i,s,h,m,e,n){const c=r("Toast"),o=r("Button"),f=r("Column"),y=r("DataTable"),D=r("ScrollPanel"),x=r("InputText"),C=r("Checkbox"),b=r("Dialog");return p(),u("main",L,[t(c),t(D,{style:{width:"100%",height:"100%"}},{default:d(()=>[a("div",Q,[a("h2",null,G(e.title),1)]),a("div",X,[t(o,{label:"Nuevo",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:n.openNew},null,8,["onClick"]),t(o,{label:"Editar",icon:"pi pi-user-edit",class:"p-button-secondary mr-2",onClick:s[0]||(s[0]=l=>n.openEdit(e.selectedItems)),disabled:!e.selectedItems},null,8,["disabled"]),t(o,{label:"Eliminar",icon:"pi pi-trash",class:"p-button-danger",onClick:n.confirmDeleteSelected,disabled:!e.selectedItems},null,8,["onClick","disabled"])]),a("div",Y,[t(y,{value:e.items,style:{width:"500px"},selection:e.selectedItems,"onUpdate:selection":s[1]||(s[1]=l=>e.selectedItems=l),dataKey:"id",scrollable:!0,scrollHeight:"calc(100vh - 223px)"},{default:d(()=>[t(f,{selectionMode:"single",headerStyle:"width: 1em; max-width:50px",style:{"max-width":"50px"}}),t(f,{field:"name",header:"Nombre"})]),_:1},8,["value","selection"])])]),_:1}),t(b,{visible:e.showDialog,"onUpdate:visible":s[4]||(s[4]=l=>e.showDialog=l),style:{width:"450px"},header:"Sector",modal:!0,class:"p-fluid"},{footer:d(()=>[t(o,{label:"Cancelar",icon:"pi pi-times",class:"p-button-text",onClick:n.hideDialog},null,8,["onClick"]),t(o,{label:"Guardar",icon:"pi pi-check",class:"p-button-text",onClick:n.save},null,8,["onClick"])]),default:d(()=>[a("div",Z,[$,t(x,{id:"name",modelValue:e.model.name,"onUpdate:modelValue":s[2]||(s[2]=l=>e.model.name=l),modelModifiers:{trim:!0},required:"true",autofocus:"",class:v({"p-invalid":e.submitted&&!e.model.name})},null,8,["modelValue","class"]),e.submitted&&!e.model.name?(p(),u("small",ee,"Nombre es requerido.")):g("",!0)]),a("div",te,[se,t(C,{id:"active",modelValue:e.model.active,"onUpdate:modelValue":s[3]||(s[3]=l=>e.model.active=l),modelModifiers:{trim:!0},binary:!0,class:v({"p-invalid":e.submitted})},null,8,["modelValue","class"])]),ie]),_:1},8,["visible"]),t(b,{visible:e.deleteDialog,"onUpdate:visible":s[6]||(s[6]=l=>e.deleteDialog=l),style:{width:"450px"},header:"Confirmar",modal:!0},{footer:d(()=>[t(o,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:s[5]||(s[5]=l=>e.deleteDialog=!1)}),t(o,{label:"Si",icon:"pi pi-check",class:"p-button-text",onClick:n.deleteSelectedItems},null,8,["onClick"])]),default:d(()=>[a("div",le,[oe,e.model?(p(),u("span",ae,"\xBFEst\xE1s seguro que deseas eliminar el registro seleccionado?")):g("",!0)])]),_:1},8,["visible"])])}var ue=k(J,[["render",ne]]);export{ue as default};
