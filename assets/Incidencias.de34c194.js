import{s as nt,l as Wt}from"./IncidentService.eb8d53a6.js";import{P as Vt,D as Ut,a as zt,_ as Gt,g as jt,n as it}from"./notify.e32d4bc4.js";import{l as Kt}from"./Sectors.cc9b91a5.js";import{l as Yt}from"./IncidentTypeService.52ef63d9.js";import{M as Xt}from"./Validator.a3b6b341.js";import{$ as o,ap as Jt,T as qt,s as T,e as p,d as f,aq as Zt,K as b,al as B,ar as at,ag as j,as as Qt,X as ft,F as te,k as O,O as ee,at as ne,au as ie,G as vt,ah as bt,ai as H,aj as J,a0 as ae,j as F,a9 as N,av as ot,aw as Ct,a7 as w,S as C,u as k,I as oe,N as le,J as St,P as se,n as K,p as L,ax as Et,ay as re,az as ue,_ as de,aA as ce,r as c,o as y,c as pe,a as r,w as m,b as s,aB as he,aC as lt,aD as A,aE as P,aF as M,aG as $}from"./index.ea610c3a.js";import{r as E,E as I,L as _e,P as me,S as ge,a as fe,D as ve,b as be,c as Ce,d as Se,e as Ee,f as De,g as xe,h as Te,i as Ie,j as ye,k as Ae,l as Be,_ as Oe,m as Ne,n as we}from"./scroll-view.e6bfb345.js";import"./exporter.8932ebe8.js";var W={},Dt=function(t,e,n){var i=o(t),a=n?i.scrollLeft():i.scrollTop(),l=n?"Width":"Height",_=i.prop("scroll".concat(l)),h=i.prop("client".concat(l)),g=_-h-a|0;if(a===0&&g===0)return!1;var S=a===0&&e>=0,U=g===0&&e<=0,v=a>0&&g>0;if(S||U||v)return!0},Re=function(t,e){var n=o(t);return{validate:function(i){if(Jt(i)&&(a=i.target,e?o(a).is(t):!0))return Dt(n,-i.delta,i.shiftKey)?(i._needSkipEvent=!0,!0):!1;var a}}},Pe="dx-textarea",Me="dx-texteditor-input",$e="dx-texteditor-input-auto-resize",xt=qt.inherit({_getDefaultOptions:function(){return T(this.callBase(),{spellcheck:!0,minHeight:void 0,maxHeight:void 0,autoResizeEnabled:!1})},_initMarkup:function(){this.$element().addClass(Pe),this.callBase(),this.setAria("multiline","true")},_renderContentImpl:function(){this._updateInputHeight(),this.callBase()},_renderInput:function(){this.callBase(),this._renderScrollHandler()},_createInput:function(){var t=o("<textarea>");return this._applyInputAttributes(t,this.option("inputAttr")),this._updateInputAutoResizeAppearance(t),t},_applyInputAttributes:function(t,e){t.attr(e).addClass(Me)},_renderScrollHandler:function(){this._eventY=0;var t=this._input(),e=Re(t,!0);p.on(t,f(Zt.init,this.NAME),e,b),p.on(t,f(B.down,this.NAME),this._pointerDownHandler.bind(this)),p.on(t,f(B.move,this.NAME),this._pointerMoveHandler.bind(this))},_pointerDownHandler:function(t){this._eventY=at(t).y},_pointerMoveHandler:function(t){var e=at(t).y,n=this._eventY-e;Dt(this._input(),n)&&(t.isScrollingEvent=!0,t.stopPropagation()),this._eventY=e},_renderDimensions:function(){var t=this.$element(),e=t.get(0),n=this._getOptionValue("width",e),i=this._getOptionValue("height",e),a=this.option("minHeight"),l=this.option("maxHeight");t.css({minHeight:a!==void 0?a:"",maxHeight:l!==void 0?l:"",width:n,height:i})},_resetDimensions:function(){this.$element().css({height:"",minHeight:"",maxHeight:""})},_renderEvents:function(){this.option("autoResizeEnabled")&&p.on(this._input(),f("input paste",this.NAME),this._updateInputHeight.bind(this)),this.callBase()},_refreshEvents:function(){p.off(this._input(),f("input paste",this.NAME)),this.callBase()},_getHeightDifference(t){return j(this._$element.get(0),!1)+j(this._$textEditorContainer.get(0),!1)+j(this._$textEditorInputContainer.get(0),!1)+Qt("height",ft().getComputedStyle(t.get(0))).margin},_updateInputHeight:function(){if(!!te()){var t=this._input(),e=this.option("height"),n=e===void 0&&this.option("autoResizeEnabled"),i=n||e===void 0&&this.option("minHeight");if(!i){t.css("height","");return}this._resetDimensions(),this._$element.css("height",O(this._$element)),t.css("height",0);var a=this._getHeightDifference(t);this._renderDimensions();var l=this._getBoundaryHeight("minHeight"),_=this._getBoundaryHeight("maxHeight"),h=t[0].scrollHeight;if(l!==void 0&&(h=Math.max(h,l-a)),_!==void 0){var g=_-a,S=h>g;h=Math.min(h,g),this._updateInputAutoResizeAppearance(t,!S)}t.css("height",h),n&&this._$element.css("height","auto")}},_getBoundaryHeight:function(t){var e=this.option(t);if(ee(e))return typeof e=="number"?e:ne(e,this.$element().get(0).parentElement)},_renderInputType:b,_visibilityChanged:function(t){t&&this._updateInputHeight()},_updateInputAutoResizeAppearance:function(t,e){if(t){var n=ie(e,this.option("autoResizeEnabled"));t.toggleClass($e,n)}},_dimensionChanged:function(){this.option("visible")&&this._updateInputHeight()},_optionChanged:function(t){switch(t.name){case"autoResizeEnabled":this._updateInputAutoResizeAppearance(this._input(),t.value),this._refreshEvents(),this._updateInputHeight();break;case"value":case"height":this.callBase(t),this._updateInputHeight();break;case"minHeight":case"maxHeight":this._renderDimensions(),this._updateInputHeight();break;case"visible":this.callBase(t),t.value&&this._updateInputHeight();break;default:this.callBase(t)}}});vt("dxTextArea",xt);const Le=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"})),He=bt(Le);/*!
 * devextreme-vue
 * Version: 22.1.5
 * Build date: Fri Sep 02 2022
 *
 * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */var Fe=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(W,"__esModule",{value:!0});W.DxTextArea=void 0;var ke=Fe(He),We=J,Tt=We.createComponent({props:{accessKey:String,activeStateEnabled:Boolean,autoResizeEnabled:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,inputAttr:{},isValid:Boolean,label:String,labelMode:String,maxHeight:[Number,String],maxLength:[Number,String],minHeight:[Number,String],name:String,onChange:Function,onContentReady:Function,onCopy:Function,onCut:Function,onDisposing:Function,onEnterKey:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onInput:Function,onKeyDown:Function,onKeyUp:Function,onOptionChanged:Function,onPaste:Function,onValueChanged:Function,placeholder:String,readOnly:Boolean,rtlEnabled:Boolean,spellcheck:Boolean,stylingMode:String,tabIndex:Number,text:String,validationError:{},validationErrors:Array,validationMessageMode:String,validationStatus:String,value:String,valueChangeEvent:String,visible:Boolean,width:[Function,Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:autoResizeEnabled":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:inputAttr":null,"update:isValid":null,"update:label":null,"update:labelMode":null,"update:maxHeight":null,"update:maxLength":null,"update:minHeight":null,"update:name":null,"update:onChange":null,"update:onContentReady":null,"update:onCopy":null,"update:onCut":null,"update:onDisposing":null,"update:onEnterKey":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onInput":null,"update:onKeyDown":null,"update:onKeyUp":null,"update:onOptionChanged":null,"update:onPaste":null,"update:onValueChanged":null,"update:placeholder":null,"update:readOnly":null,"update:rtlEnabled":null,"update:spellcheck":null,"update:stylingMode":null,"update:tabIndex":null,"update:text":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationStatus":null,"update:value":null,"update:valueChangeEvent":null,"update:visible":null,"update:width":null},model:{prop:"value",event:"update:value"},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=ke.default,this.$_hasAsyncTemplate=!0}});W.DxTextArea=Tt;var Ve=W.default=Tt,d={},It={_menuEnabled:function(){return!!this._menuItems().length},_menuItems:function(){return this._list.option("menuItems")},_deleteEnabled:function(){return this._list.option("allowItemDeleting")},_fireMenuAction:function(t,e){this._list._itemEventHandlerByHandler(t,e,{},{excludeValidators:["disabled","readOnly"]})}},st="dx-list-context-menu",Ue="dx-list-context-menucontent";E("menu","context",I.inherit({_init:function(){var t=o("<div>").addClass(st);this._list.$element().append(t),this._menu=this._renderOverlay(t)},_renderOverlay:function(t){return this._list._createComponent(t,ae,{shading:!1,deferRendering:!0,hideOnParentScroll:!0,hideOnOutsideClick:function(e){return!o(e.target).closest("."+st).length},animation:{show:{type:"slide",duration:300,from:{height:0,opacity:1},to:{height:function(){return O(this._$menuList)}.bind(this),opacity:1}},hide:{type:"slide",duration:0,from:{opacity:1},to:{opacity:0}}},_ignoreFunctionValueDeprecation:!0,height:function(){return this._$menuList?O(this._$menuList):0}.bind(this),width:function(){return F(this._list.$element())}.bind(this),onContentReady:this._renderMenuContent.bind(this)})},_renderMenuContent:function(t){var e=t.component.$content(),n=this._menuItems().slice();this._deleteEnabled()&&n.push({text:N.format("dxListEditDecorator-delete"),action:this._deleteItem.bind(this)}),this._$menuList=o("<div>"),this._list._createComponent(this._$menuList,_e,{items:n,onItemClick:this._menuItemClickHandler.bind(this),height:"auto",integrationOptions:{}}),e.addClass(Ue),e.append(this._$menuList)},_menuItemClickHandler:function(t){this._menu.hide(),this._fireMenuAction(this._$itemWithMenu,t.itemData.action)},_deleteItem:function(){this._list.deleteItem(this._$itemWithMenu)},handleContextMenu:function(t){return this._$itemWithMenu=t,this._menu.option({position:{my:"top",at:"bottom",of:t,collision:"flip"}}),this._menu.show(),!0},dispose:function(){this._menu&&this._menu.$element().remove(),this.callBase.apply(this,arguments)}}).include(It));var rt=I.abstract,yt="dxListEditDecorator",ut=f(B.down,yt),dt=f(Ct,yt),ze="dx-list-item-content",Y="dx-list-switchable-delete-ready",Ge="dx-list-switchable-menu-shield-positioning",je="dx-list-switchable-delete-top-shield",Ke="dx-list-switchable-delete-bottom-shield",ct="dx-list-switchable-menu-item-shield-positioning",Ye="dx-list-switchable-delete-item-content-shield",Xe="dx-list-switchable-delete-button-container",At=I.inherit({_init:function(){this._$topShield=o("<div>").addClass(je),this._$bottomShield=o("<div>").addClass(Ke),this._$itemContentShield=o("<div>").addClass(Ye),p.on(this._$topShield,ut,this._cancelDeleteReadyItem.bind(this)),p.on(this._$bottomShield,ut,this._cancelDeleteReadyItem.bind(this)),this._list.$element().append(this._$topShield.toggle(!1)).append(this._$bottomShield.toggle(!1))},handleClick:function(){return this._cancelDeleteReadyItem()},_cancelDeleteReadyItem:function(){return this._$readyToDeleteItem?(this._cancelDelete(this._$readyToDeleteItem),!0):!1},_cancelDelete:function(t){this._toggleDeleteReady(t,!1)},_toggleDeleteReady:function(t,e){e===void 0&&(e=!this._isReadyToDelete(t)),this._toggleShields(t,e),this._toggleScrolling(e),this._cacheReadyToDeleteItem(t,e),this._animateToggleDelete(t,e)},_isReadyToDelete:function(t){return t.hasClass(Y)},_toggleShields:function(t,e){this._list.$element().toggleClass(Ge,e),this._$topShield.toggle(e),this._$bottomShield.toggle(e),e&&this._updateShieldsHeight(t),this._toggleContentShield(t,e)},_updateShieldsHeight:function(t){var e=this._list.$element(),n=e.offset().top,i=O(e),a=t.offset().top,l=O(t),_=a-n,h=i-l-_;ot(this._$topShield,Math.max(_,0)),ot(this._$bottomShield,Math.max(h,0))},_toggleContentShield:function(t,e){e?t.find("."+ze).first().append(this._$itemContentShield):this._$itemContentShield.detach()},_toggleScrolling:function(t){var e=this._list.$element().dxScrollView("instance");t?e.on("start",this._cancelScrolling):e.off("start",this._cancelScrolling)},_cancelScrolling:function(t){t.event.cancel=!0},_cacheReadyToDeleteItem:function(t,e){e?this._$readyToDeleteItem=t:delete this._$readyToDeleteItem},_animateToggleDelete:function(t,e){e?(this._enablePositioning(t),this._prepareDeleteReady(t),this._animatePrepareDeleteReady(t),p.off(t,B.up)):(this._forgetDeleteReady(t),this._animateForgetDeleteReady(t).done(this._disablePositioning.bind(this,t)))},_enablePositioning:function(t){t.addClass(ct),p.on(t,dt,b),p.one(t,B.up,this._disablePositioning.bind(this,t))},_disablePositioning:function(t){t.removeClass(ct),p.off(t,dt)},_prepareDeleteReady:function(t){t.addClass(Y)},_forgetDeleteReady:function(t){t.removeClass(Y)},_animatePrepareDeleteReady:rt,_animateForgetDeleteReady:rt,_getDeleteButtonContainer:function(t){return t=t||this._$readyToDeleteItem,t.children("."+Xe)},_deleteItem:function(t){t=t||this._$readyToDeleteItem,this._getDeleteButtonContainer(t).detach(),!t.is(".dx-state-disabled, .dx-state-disabled *")&&this._list.deleteItem(t).always(this._cancelDelete.bind(this,t))},_isRtlEnabled:function(){return this._list.option("rtlEnabled")},dispose:function(){this._$topShield&&this._$topShield.remove(),this._$bottomShield&&this._$bottomShield.remove(),this.callBase.apply(this,arguments)}}),Je="dx-list-switchable-delete-button-container",qe="dx-list-switchable-delete-button-wrapper",Ze="dx-list-switchable-delete-button-inner-wrapper",Qe="dx-list-switchable-delete-button",pt=200,Bt=At.inherit({_init:function(){this.callBase.apply(this,arguments);var t=o("<div>").addClass(Je),e=o("<div>").addClass(qe),n=o("<div>").addClass(Ze),i=o("<div>").addClass(Qe);this._list._createComponent(i,w,{text:N.format("dxListEditDecorator-delete"),type:"danger",onClick:function(a){this._deleteItem(),a.event.stopPropagation()}.bind(this),integrationOptions:{}}),t.append(e),e.append(n),n.append(i),this._$buttonContainer=t},_enablePositioning:function(t){this.callBase.apply(this,arguments),C.stop(this._$buttonContainer,!0),this._$buttonContainer.appendTo(t)},_disablePositioning:function(){this.callBase.apply(this,arguments),this._$buttonContainer.detach()},_animatePrepareDeleteReady:function(){var t=this._isRtlEnabled(),e=k(this._list.$element()),n=this._buttonWidth(),i=t?e:-n,a=t?e-n:0;return C.animate(this._$buttonContainer,{type:"custom",duration:pt,from:{right:i},to:{right:a}})},_animateForgetDeleteReady:function(){var t=this._isRtlEnabled(),e=k(this._list.$element()),n=this._buttonWidth(),i=t?e-n:0,a=t?e:-n;return C.animate(this._$buttonContainer,{type:"custom",duration:pt,from:{right:i},to:{right:a}})},_buttonWidth:function(){return this._buttonContainerWidth||(this._buttonContainerWidth=F(this._$buttonContainer)),this._buttonContainerWidth},dispose:function(){this._$buttonContainer&&this._$buttonContainer.remove(),this.callBase.apply(this,arguments)}}),tn="dx-list-toggle-delete-switch-container",en="dx-list-toggle-delete-switch";E("delete","toggle",Bt.inherit({beforeBag:function(t){var e=t.$itemElement,n=t.$container,i=o("<div>").addClass(en);this._list._createComponent(i,w,{icon:"toggle-delete",onClick:function(a){C.stop(this._$buttonContainer,!1),this._toggleDeleteReady(e),a.event.stopPropagation()}.bind(this),integrationOptions:{}}),n.addClass(tn),n.append(i)}}));E("delete","slideButton",Bt.inherit({_shouldHandleSwipe:!0,_swipeEndHandler:function(t,e){return e.targetOffset!==0&&(C.stop(this._$buttonContainer,!1),this._toggleDeleteReady(t)),!0}}));var x=ft(),nn="dx-actionsheet",an="dx-actionsheet-container",on="dx-actionsheet-popup-wrapper",ln="dx-actionsheet-popover-wrapper",sn="dx-actionsheet-cancel",rn="dx-actionsheet-item",un="dxActionSheetItemData",dn="dx-actionsheet-without-title",ht="outlined",Ot=oe.inherit({_getDefaultOptions:function(){return T(this.callBase(),{usePopover:!1,target:null,title:"",showTitle:!0,showCancelButton:!0,cancelText:N.format("Cancel"),onCancelClick:null,visible:!1,noDataText:"",focusStateEnabled:!1,selectionByClick:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios",tablet:!0},options:{usePopover:!0}}])},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new le(function(t,e){var n=new w(o("<div>"),T({onClick:e&&e.click,stylingMode:e&&e.stylingMode||ht},e));t.append(n.$element())},["disabled","icon","text","type","onClick","click","stylingMode"],this.option("integrationOptions.watchMethod"))})},_itemContainer:function(){return this._$itemContainer},_itemClass:function(){return rn},_itemDataKey:function(){return un},_toggleVisibility:b,_renderDimensions:b,_initMarkup:function(){this.callBase(),this.$element().addClass(nn),this._createItemContainer()},_render:function(){this._renderPopup()},_createItemContainer:function(){this._$itemContainer=o("<div>").addClass(an),this._renderDisabled()},_renderDisabled:function(){this._$itemContainer.toggleClass("dx-state-disabled",this.option("disabled"))},_renderPopup:function(){this._$popup=o("<div>").appendTo(this.$element()),this._isPopoverMode()?this._createPopover():this._createPopup(),this._renderPopupTitle(),this._mapPopupOption("visible")},_mapPopupOption:function(t){this._popup&&this._popup.option(t,this.option(t))},_isPopoverMode:function(){return this.option("usePopover")&&this.option("target")},_renderPopupTitle:function(){this._mapPopupOption("showTitle"),this._popup&&this._popup.$wrapper().toggleClass(dn,!this.option("showTitle"))},_clean:function(){this._$popup&&this._$popup.remove(),this.callBase()},_overlayConfig:function(){return{onInitialized:function(t){this._popup=t.component}.bind(this),disabled:!1,showTitle:!0,title:this.option("title"),deferRendering:!x.angular,onContentReady:this._popupContentReadyAction.bind(this),onHidden:this.hide.bind(this)}},_createPopover:function(){this._createComponent(this._$popup,me,T(this._overlayConfig(),{width:this.option("width")||200,height:this.option("height")||"auto",target:this.option("target")})),this._popup.$wrapper().addClass(ln)},_createPopup:function(){this._createComponent(this._$popup,Vt,T(this._overlayConfig(),{dragEnabled:!1,width:this.option("width")||"100%",height:this.option("height")||"auto",showCloseButton:!1,position:{my:"bottom",at:"bottom",of:x},animation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom",of:x}},to:{position:{my:"bottom",at:"bottom",of:x}}},hide:{type:"slide",duration:400,from:{position:{my:"bottom",at:"bottom",of:x}},to:{position:{my:"top",at:"bottom",of:x}}}}})),this._popup.$wrapper().addClass(on)},_popupContentReadyAction:function(){this._popup.$content().append(this._$itemContainer),this._attachClickEvent(),this._attachHoldEvent(),this._prepareContent(),this._renderContent(),this._renderCancelButton()},_renderCancelButton:function(){if(!this._isPopoverMode()&&(this._$cancelButton&&this._$cancelButton.remove(),this.option("showCancelButton"))){var t=this._createActionByOption("onCancelClick")||b,e=this;this._$cancelButton=o("<div>").addClass(sn).appendTo(this._popup&&this._popup.$content()),this._createComponent(this._$cancelButton,w,{disabled:!1,stylingMode:ht,text:this.option("cancelText"),onClick:function(n){var i={event:n,cancel:!1};t(i),i.cancel||e.hide()},integrationOptions:{}})}},_attachItemClickEvent:b,_itemClickHandler:function(t){this.callBase(t),o(t.target).is(".dx-state-disabled, .dx-state-disabled *")||this.hide()},_itemHoldHandler:function(t){this.callBase(t),o(t.target).is(".dx-state-disabled, .dx-state-disabled *")||this.hide()},_optionChanged:function(t){switch(t.name){case"width":case"height":case"visible":case"title":this._mapPopupOption(t.name);break;case"disabled":this._renderDisabled();break;case"showTitle":this._renderPopupTitle();break;case"showCancelButton":case"onCancelClick":case"cancelText":this._renderCancelButton();break;case"target":case"usePopover":case"items":this._invalidate();break;default:this.callBase(t)}},toggle:function(t){var e=this,n=new St;return e._popup.toggle(t).done(function(){e.option("visible",t),n.resolveWith(e)}),n.promise()},show:function(){return this.toggle(!0)},hide:function(){return this.toggle(!1)}});vt("dxActionSheet",Ot);var Nt="dxListEditDecorator",_t=f(re,Nt),cn=f(Ct,Nt),pn="dx-list-slide-menu",hn="dx-list-slide-menu-wrapper",X="dx-list-slide-menu-content",_n="dx-list-slide-menu-buttons-container",mn="dx-list-slide-menu-buttons",mt="dx-list-slide-menu-button",gn="dx-list-slide-menu-button-menu",fn="dx-list-slide-menu-button-delete",vn=400,bn="cubic-bezier(0.075, 0.82, 0.165, 1)";E("menu","slide",At.inherit({_shouldHandleSwipe:!0,_init:function(){this.callBase.apply(this,arguments),this._$buttonsContainer=o("<div>").addClass(_n),p.on(this._$buttonsContainer,cn,b),this._$buttons=o("<div>").addClass(mn).appendTo(this._$buttonsContainer),this._renderMenu(),this._renderDeleteButton()},_renderMenu:function(){if(!!this._menuEnabled()){var t=this._menuItems();if(t.length===1){var e=t[0];this._renderMenuButton(e.text,function(a){a.stopPropagation(),this._fireAction(e)}.bind(this))}else{var n=o("<div>").addClass(pn);this._menu=this._list._createComponent(n,Ot,{showTitle:!1,items:t,onItemClick:function(a){this._fireAction(a.itemData)}.bind(this),integrationOptions:{}}),n.appendTo(this._list.$element());var i=this._renderMenuButton(N.format("dxListEditDecorator-more"),function(a){a.stopPropagation(),this._menu.show()}.bind(this));this._menu.option("target",i)}}},_renderMenuButton:function(t,e){var n=o("<div>").addClass(mt).addClass(gn).text(t);return this._$buttons.append(n),p.on(n,_t,e),n},_renderDeleteButton:function(){if(!!this._deleteEnabled()){var t=o("<div>").addClass(mt).addClass(fn).text(se()?"":N.format("dxListEditDecorator-delete"));p.on(t,_t,function(e){e.stopPropagation(),this._deleteItem()}.bind(this)),this._$buttons.append(t)}},_fireAction:function(t){this._fireMenuAction(o(this._cachedNode),t.action),this._cancelDeleteReadyItem()},modifyElement:function(t){this.callBase.apply(this,arguments);var e=t.$itemElement;e.addClass(hn);var n=o("<div>").addClass(X);e.wrapInner(n)},_getDeleteButtonContainer:function(){return this._$buttonsContainer},handleClick:function(t,e){return o(e.target).closest("."+X).length?this.callBase.apply(this,arguments):!1},_swipeStartHandler:function(t){this._enablePositioning(t),this._cacheItemData(t),this._setPositions(this._getPositions(0))},_swipeUpdateHandler:function(t,e){var n=this._isRtlEnabled(),i=n?-1:1,a=this._isReadyToDelete(t),l=this._getCurrentPositions().content===this._getStartPositions().content;if(l&&!a&&e.offset*i>0){e.cancel=!0;return}var _=this._cachedItemWidth*e.offset,h=a?-this._cachedButtonWidth*i:0,g=(_+h)*i,S=g<0?Math.abs((_+h)/this._cachedButtonWidth):0;return this._setPositions(this._getPositions(S)),!0},_getStartPositions:function(){var t=this._isRtlEnabled(),e=t?-1:1;return{content:0,buttonsContainer:t?-this._cachedButtonWidth:this._cachedItemWidth,buttons:-this._cachedButtonWidth*e}},_getPositions:function(t){var e=this._isRtlEnabled(),n=e?-1:1,i=this._getStartPositions();return{content:i.content-t*this._cachedButtonWidth*n,buttonsContainer:i.buttonsContainer-Math.min(t,1)*this._cachedButtonWidth*n,buttons:i.buttons+Math.min(t,1)*this._cachedButtonWidth*n}},_getCurrentPositions:function(){return{content:K(this._$cachedContent).left,buttonsContainer:K(this._$buttonsContainer).left,buttons:K(this._$buttons).left}},_setPositions:function(t){L(this._$cachedContent,{left:t.content}),L(this._$buttonsContainer,{left:t.buttonsContainer}),L(this._$buttons,{left:t.buttons})},_cacheItemData:function(t){t[0]!==this._cachedNode&&(this._$cachedContent=t.find("."+X),this._cachedItemWidth=F(t),this._cachedButtonWidth=this._cachedButtonWidth||F(this._$buttons),Et(this._$buttonsContainer,this._cachedButtonWidth),this._$cachedContent.length&&(this._cachedNode=t[0]))},_minButtonContainerLeftOffset:function(){return this._cachedItemWidth-this._cachedButtonWidth},_swipeEndHandler:function(t,e){this._cacheItemData(t);var n=this._isRtlEnabled()?1:-1,i=this._cachedItemWidth*e.offset,a=!this._isReadyToDelete(t)&&i*n>.2*this._cachedButtonWidth,l=e.targetOffset===n&&a;return this._toggleDeleteReady(t,l),!0},_enablePositioning:function(t){C.stop(this._$cachedContent,!0),this.callBase.apply(this,arguments),this._$buttonsContainer.appendTo(t)},_disablePositioning:function(){this.callBase.apply(this,arguments),this._$buttonsContainer.detach()},_animatePrepareDeleteReady:function(){return this._animateToPositions(this._getPositions(1))},_animateForgetDeleteReady:function(t){return this._cacheItemData(t),this._animateToPositions(this._getPositions(0))},_animateToPositions:function(t){var e=this,n=this._getCurrentPositions(),i=Math.min(Math.abs(n.content-t.content)/this._cachedButtonWidth,1);return C.animate(this._$cachedContent,{from:n,to:t,easing:bn,duration:vn*i,strategy:"frame",draw:function(a){e._setPositions(a)}})},dispose:function(){this._menu&&this._menu.$element().remove(),this._$buttonsContainer&&this._$buttonsContainer.remove(),this.callBase.apply(this,arguments)}}).include(It));var Cn="dx-list-static-delete-button-container",Sn="dx-list-static-delete-button";E("delete","static",I.inherit({afterBag:function(t){var e=t.$itemElement,n=t.$container,i=o("<div>").addClass(Sn);this._list._createComponent(i,w,{icon:"remove",onClick:function(a){a.event.stopPropagation(),this._deleteItem(e)}.bind(this),integrationOptions:{}}),n.addClass(Cn).append(i)},_deleteItem:function(t){t.is(".dx-state-disabled, .dx-state-disabled *")||this._list.deleteItem(t)}}));E("delete","swipe",I.inherit({_shouldHandleSwipe:!0,_renderItemPosition:function(t,e,n){var i=new St,a=e*this._itemElementWidth;return n?C.animate(t,{to:{left:a},type:"slide",complete:function(){i.resolve(t,e)}}):(L(t,{left:a}),i.resolve()),i.promise()},_swipeStartHandler:function(t){return this._itemElementWidth=k(t),!0},_swipeUpdateHandler:function(t,e){return this._renderItemPosition(t,e.offset),!0},_swipeEndHandler:function(t,e){var n=e.targetOffset;return this._renderItemPosition(t,n,!0).done(function(i,a){Math.abs(a)&&this._list.deleteItem(i).fail(function(){this._renderItemPosition(i,0,!0)}.bind(this))}.bind(this)),!0}}));var En="dx-list-reorder-handle-container",gt="dx-list-reorder-handle",Dn="dx-list-item-ghost-reordering",xn="dx-state-hover";E("reorder","default",I.inherit({_init:function(){var t=this._list;this._groupedEnabled=this._list.option("grouped"),this._lockedDrag=!1;var e=this._groupedEnabled?"> .dx-list-group > .dx-list-group-body > .dx-list-item":"> .dx-list-item";this._sortable=t._createComponent(t._scrollView.content(),ge,T({component:t,contentTemplate:null,allowReordering:!1,filter:e,container:t.$element(),dragDirection:t.option("itemDragging.group")?"both":"vertical",handle:".".concat(gt),dragTemplate:this._dragTemplate,onDragStart:this._dragStartHandler.bind(this),onDragChange:this._dragChangeHandler.bind(this),onReorder:this._reorderHandler.bind(this)},t.option("itemDragging")))},afterRender:function(){this._sortable.update()},_dragTemplate:function(t){var e=o(t.itemElement).clone().addClass(Dn).addClass(xn);return Et(e,k(t.itemElement)),e},_dragStartHandler:function(t){if(this._lockedDrag){t.cancel=!0;return}},_dragChangeHandler:function(t){if(this._groupedEnabled&&!this._sameParent(t.fromIndex,t.toIndex)){t.cancel=!0;return}},_sameParent:function(t,e){var n=this._list.getItemElementByFlatIndex(t),i=this._list.getItemElementByFlatIndex(e);return i.parent().get(0)===n.parent().get(0)},_reorderHandler:function(t){var e=this._list.getItemElementByFlatIndex(t.toIndex);this._list.reorderItem(o(t.itemElement),e)},afterBag:function(t){var e=o("<div>").addClass(gt);p.on(e,"dxpointerdown",n=>{this._lockedDrag=!ue(n)}),p.on(e,"dxhold",{timeout:30},n=>{n.cancel=!0,this._lockedDrag=!1}),t.$container.addClass(En).append(e)}}));const Tn=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"})),In=bt(Tn);/*!
 * devextreme-vue
 * Version: 22.1.5
 * Build date: Fri Sep 02 2022
 *
 * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */var yn=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d,"__esModule",{value:!0});d.DxSearchEditorOptions=d.DxOptions=d.DxMenuItem=d.DxItemDragging=d.DxItem=d.DxCursorOffset=d.DxButton=d.DxList=void 0;var An=yn(In),Bn=J,D=J,wt=Bn.createComponent({props:{accessKey:String,activeStateEnabled:Boolean,allowItemDeleting:Boolean,bounceEnabled:Boolean,collapsibleGroups:Boolean,dataSource:{},disabled:Boolean,displayExpr:[Function,String],elementAttr:Object,focusStateEnabled:Boolean,grouped:Boolean,groupTemplate:{},height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,indicateLoading:Boolean,itemDeleteMode:String,itemDragging:Object,itemHoldTimeout:Number,items:Array,itemTemplate:{},keyExpr:[Function,String],menuItems:Array,menuMode:String,nextButtonText:String,noDataText:String,onContentReady:Function,onDisposing:Function,onGroupRendered:Function,onInitialized:Function,onItemClick:Function,onItemContextMenu:Function,onItemDeleted:Function,onItemDeleting:Function,onItemHold:Function,onItemRendered:Function,onItemReordered:Function,onItemSwipe:Function,onOptionChanged:Function,onPageLoading:Function,onPullRefresh:Function,onScroll:Function,onSelectAllValueChanged:Function,onSelectionChanged:Function,pageLoadingText:String,pageLoadMode:String,pulledDownText:String,pullingDownText:String,pullRefreshEnabled:Boolean,refreshingText:String,repaintChangesOnly:Boolean,rtlEnabled:Boolean,scrollByContent:Boolean,scrollByThumb:Boolean,scrollingEnabled:Boolean,searchEditorOptions:Object,searchEnabled:Boolean,searchExpr:[Array,Function,String],searchMode:String,searchTimeout:Number,searchValue:String,selectAllMode:String,selectAllText:String,selectedItemKeys:Array,selectedItems:Array,selectionMode:String,showScrollbar:String,showSelectionControls:Boolean,tabIndex:Number,useNativeScrolling:Boolean,visible:Boolean,width:[Function,Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:allowItemDeleting":null,"update:bounceEnabled":null,"update:collapsibleGroups":null,"update:dataSource":null,"update:disabled":null,"update:displayExpr":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:grouped":null,"update:groupTemplate":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:indicateLoading":null,"update:itemDeleteMode":null,"update:itemDragging":null,"update:itemHoldTimeout":null,"update:items":null,"update:itemTemplate":null,"update:keyExpr":null,"update:menuItems":null,"update:menuMode":null,"update:nextButtonText":null,"update:noDataText":null,"update:onContentReady":null,"update:onDisposing":null,"update:onGroupRendered":null,"update:onInitialized":null,"update:onItemClick":null,"update:onItemContextMenu":null,"update:onItemDeleted":null,"update:onItemDeleting":null,"update:onItemHold":null,"update:onItemRendered":null,"update:onItemReordered":null,"update:onItemSwipe":null,"update:onOptionChanged":null,"update:onPageLoading":null,"update:onPullRefresh":null,"update:onScroll":null,"update:onSelectAllValueChanged":null,"update:onSelectionChanged":null,"update:pageLoadingText":null,"update:pageLoadMode":null,"update:pulledDownText":null,"update:pullingDownText":null,"update:pullRefreshEnabled":null,"update:refreshingText":null,"update:repaintChangesOnly":null,"update:rtlEnabled":null,"update:scrollByContent":null,"update:scrollByThumb":null,"update:scrollingEnabled":null,"update:searchEditorOptions":null,"update:searchEnabled":null,"update:searchExpr":null,"update:searchMode":null,"update:searchTimeout":null,"update:searchValue":null,"update:selectAllMode":null,"update:selectAllText":null,"update:selectedItemKeys":null,"update:selectedItems":null,"update:selectionMode":null,"update:showScrollbar":null,"update:showSelectionControls":null,"update:tabIndex":null,"update:useNativeScrolling":null,"update:visible":null,"update:width":null},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=An.default,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={item:{isCollectionItem:!0,optionName:"items"},itemDragging:{isCollectionItem:!1,optionName:"itemDragging"},menuItem:{isCollectionItem:!0,optionName:"menuItems"},searchEditorOptions:{isCollectionItem:!1,optionName:"searchEditorOptions"}}}});d.DxList=wt;var V=D.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:location":null,"update:name":null,"update:options":null},props:{location:String,name:String,options:Object}});d.DxButton=V;V.$_optionName="buttons";V.$_isCollectionItem=!0;V.$_expectedChildren={options:{isCollectionItem:!1,optionName:"options"}};var Rt=D.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});d.DxCursorOffset=Rt;Rt.$_optionName="cursorOffset";var q=D.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:badge":null,"update:disabled":null,"update:html":null,"update:icon":null,"update:showChevron":null,"update:template":null,"update:text":null,"update:visible":null},props:{badge:String,disabled:Boolean,html:String,icon:String,showChevron:Boolean,template:{},text:String,visible:Boolean}});d.DxItem=q;q.$_optionName="items";q.$_isCollectionItem=!0;var Z=D.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowDropInsideItem":null,"update:allowReordering":null,"update:autoScroll":null,"update:bindingOptions":null,"update:boundary":null,"update:container":null,"update:contentTemplate":null,"update:cursorOffset":null,"update:data":null,"update:dragDirection":null,"update:dragTemplate":null,"update:dropFeedbackMode":null,"update:elementAttr":null,"update:filter":null,"update:group":null,"update:handle":null,"update:height":null,"update:itemOrientation":null,"update:moveItemOnDrop":null,"update:onAdd":null,"update:onDisposing":null,"update:onDragChange":null,"update:onDragEnd":null,"update:onDragMove":null,"update:onDragStart":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onPlaceholderPrepared":null,"update:onRemove":null,"update:onReorder":null,"update:rtlEnabled":null,"update:scrollSensitivity":null,"update:scrollSpeed":null,"update:width":null},props:{allowDropInsideItem:Boolean,allowReordering:Boolean,autoScroll:Boolean,bindingOptions:Object,boundary:{},container:{},contentTemplate:{},cursorOffset:[Object,String],data:{},dragDirection:String,dragTemplate:{},dropFeedbackMode:String,elementAttr:Object,filter:String,group:String,handle:String,height:[Function,Number,String],itemOrientation:String,moveItemOnDrop:Boolean,onAdd:Function,onDisposing:Function,onDragChange:Function,onDragEnd:Function,onDragMove:Function,onDragStart:Function,onInitialized:Function,onOptionChanged:Function,onPlaceholderPrepared:Function,onRemove:Function,onReorder:Function,rtlEnabled:Boolean,scrollSensitivity:Number,scrollSpeed:Number,width:[Function,Number,String]}});d.DxItemDragging=Z;Z.$_optionName="itemDragging";Z.$_expectedChildren={cursorOffset:{isCollectionItem:!1,optionName:"cursorOffset"}};var Q=D.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:action":null,"update:text":null},props:{action:Function,text:String}});d.DxMenuItem=Q;Q.$_optionName="menuItems";Q.$_isCollectionItem=!0;var Pt=D.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:bindingOptions":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:icon":null,"update:onClick":null,"update:onContentReady":null,"update:onDisposing":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:stylingMode":null,"update:tabIndex":null,"update:template":null,"update:text":null,"update:type":null,"update:useSubmitBehavior":null,"update:validationGroup":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,bindingOptions:Object,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Function,Number,String]}});d.DxOptions=Pt;Pt.$_optionName="options";var tt=D.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:bindingOptions":null,"update:buttons":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:inputAttr":null,"update:isValid":null,"update:label":null,"update:labelMode":null,"update:mask":null,"update:maskChar":null,"update:maskInvalidMessage":null,"update:maskRules":null,"update:maxLength":null,"update:mode":null,"update:name":null,"update:onChange":null,"update:onContentReady":null,"update:onCopy":null,"update:onCut":null,"update:onDisposing":null,"update:onEnterKey":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onInput":null,"update:onKeyDown":null,"update:onKeyUp":null,"update:onOptionChanged":null,"update:onPaste":null,"update:onValueChanged":null,"update:placeholder":null,"update:readOnly":null,"update:rtlEnabled":null,"update:showClearButton":null,"update:showMaskMode":null,"update:spellcheck":null,"update:stylingMode":null,"update:tabIndex":null,"update:text":null,"update:useMaskedValue":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationStatus":null,"update:value":null,"update:valueChangeEvent":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,bindingOptions:Object,buttons:Array,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,inputAttr:{},isValid:Boolean,label:String,labelMode:String,mask:String,maskChar:String,maskInvalidMessage:String,maskRules:{},maxLength:[Number,String],mode:String,name:String,onChange:Function,onContentReady:Function,onCopy:Function,onCut:Function,onDisposing:Function,onEnterKey:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onInput:Function,onKeyDown:Function,onKeyUp:Function,onOptionChanged:Function,onPaste:Function,onValueChanged:Function,placeholder:String,readOnly:Boolean,rtlEnabled:Boolean,showClearButton:Boolean,showMaskMode:String,spellcheck:Boolean,stylingMode:String,tabIndex:Number,text:String,useMaskedValue:Boolean,validationError:{},validationErrors:Array,validationMessageMode:String,validationStatus:String,value:String,valueChangeEvent:String,visible:Boolean,width:[Function,Number,String]}});d.DxSearchEditorOptions=tt;tt.$_optionName="searchEditorOptions";tt.$_expectedChildren={button:{isCollectionItem:!0,optionName:"buttons"}};var On=d.default=wt;const Nn={components:{DxDataGrid:ve,DxColumn:be,DxFilterRow:Ce,DxGrouping:Se,DxGroupPanel:Ee,DxSearchPanel:De,DxHeaderFilter:xe,DxScrolling:Te,DxGridToolbar:Ie,DxItem:ye,DxSelectBox:Ae,DxGridButton:Be,DxPopup:Ut,DxToolbarItem:zt,DxTextBox:Gt,DxButton:Oe,DxTextArea:Ve,DxScrollView:Ne,DxList:On},data:()=>({showPopup:!1,crudTitle:"Detalle de Incidencia",items:[],sectors:[],incidentTypes:[],model:{type:{}},filterState:"OPEN"}),mounted(){this.listOpen(),this.loadAllSelects()},methods:{formatTimestamp(t){return ce(t,"dd/MM/yyyy HH:mm")},async loadAllSelects(){this.sectors=await Kt(),this.incidentTypes=await Yt()},create(){let t=jt();this.model={status:"IN_PROCESS",userName:t.fullName,user:{intranet:!0,name:t.fullName},registerDate:"AHORA",type:{id:null}},this.showPopup=!0},listOpen(){let t=[{field:"status",operator:"==",value:"OPEN"}];this.listAll(t)},onClosePopup(){this.showPopup=!1},getStatus(t){switch(t){case"OPEN":return{name:"Abierta",color:"white",backgroundColor:"#03A9F0"};case"IN_PROCESS":return{name:"En Proceso",color:"white",backgroundColor:"#8bc34a"};case"CLOSED":return{name:"Cerrada",color:"white",backgroundColor:"#333"};case"REJECTED":return{name:"Rechazada",color:"white",backgroundColor:"#f44336"};default:return{}}},async createAndStart(){let t=Object.assign({},this.model),e=this.incidentTypes.filter(i=>i.id==t.type.id).pop();t.registerDate=Xt(),t.type=e;let n=t.sector;t.sector=n.name,t.status="IN_PROCESS",await nt(t),t.id&&(it("Registro guardado con \xE9xito","success",3e3),this.listCurrentStatus(),this.showPopup=!1)},start(){this.update("IN_PROCESS")},reject(){this.update("REJECTED")},close(){this.update("CLOSED")},update(t){we("Seguro deseas cambiar el estado","Confirmar").then(n=>{if(n){let i=Object.assign({},this.model);i.status=t;let a=this.incidentTypes.filter(_=>_.id==i.type.id).pop();i.type=a;let l=i.sector;i.sector=l.name,nt(i),this.showPopup=!1,this.listCurrentStatus(),it("Cambio realizado con \xE9xito","success",3e3)}})},listCurrentStatus(){let t=[{field:"status",operator:"==",value:this.filterState}];this.listAll(t)},showDetail(t){let e=Object.assign({},t),n=this.incidentTypes.filter(a=>a.id==e.type.id).pop(),i=this.sectors.filter(a=>a.name==e.sector).pop();e.type=n,e.sector=i,this.model=e,console.log(this.model),this.showPopup=!0},async listAll(t){this.items=await Wt(t)},filterChange(t){let e=t.value,n=[{field:"status",operator:"==",value:e}];this.listAll(n)}}},wn={style:{padding:"10px",width:"100vw","box-sizing":"border-box"}},Rn=s("label",{style:{"font-size":"1.2em","margin-bottom":"5px"}},"Incidencias",-1),Pn=["onClick"],Mn=s("i",{class:"dx-icon-doc"},null,-1),$n={class:"dx-field"},Ln=s("div",{class:"dx-field-label"},"Sector",-1),Hn={class:"dx-field-value"},Fn={class:"dx-field"},kn=s("div",{class:"dx-field-label"},"Tipo",-1),Wn={class:"dx-field-value"},Vn={class:"dx-field"},Un=s("div",{class:"dx-field-label"},"Estado",-1),zn={class:"dx-field-value"},Gn={class:"dx-field"},jn=s("div",{class:"dx-field-label"},"Descripci\xF3n",-1),Kn={class:"dx-field-value"},Yn={class:"dx-field"},Xn=s("div",{class:"dx-field-label"},"Registrado por",-1),Jn={class:"dx-field-value"},qn={class:"dx-field"},Zn=s("div",{class:"dx-field-label"},"Registrado",-1),Qn={class:"dx-field-value"},ti={class:"dx-field"},ei=s("div",{class:"dx-field-label"},"Adjuntos",-1),ni={class:"dx-field-value"},ii=["href"];function ai(t,e,n,i,a,l){const _=c("DxFilterRow"),h=c("DxHeaderFilter"),g=c("DxSearchPanel"),S=c("DxScrolling"),U=c("DxGroupPanel"),v=c("DxColumn"),z=c("DxItem"),Mt=c("DxGridToolbar"),et=c("DxButton"),G=c("DxSelectBox"),$t=c("DxDataGrid"),Lt=c("DxTextArea"),Ht=c("DxList"),Ft=c("DxScrollView"),R=c("DxToolbarItem"),kt=c("DxPopup");return y(),pe("div",wn,[Rn,r($t,{id:"dataGrid",ref:"dataGridRef","data-source":t.items,"key-expr":"id","show-borders":!0,height:"calc(100vh - 72px)",width:"100%","allow-column-resizing":!0},{typeTemplate:m(({data:u})=>[s("span",{style:P({backgroundColor:u.data.type.backgroundColor,color:u.data.type.foregroundColor,padding:"5px",borderRadius:"15px"})},[s("i",{class:he(u.data.type.icon)},null,2),lt(" "+A(u.data.type.name),1)],4)]),timestampTemplate:m(({data:u})=>[s("span",null,A(u.data.registerDate?l.formatTimestamp(u.data.registerDate.toDate()):"-"),1)]),buttonsTemplate:m(({data:u})=>[s("a",{onClick:oi=>l.showDetail(u.data),style:{cursor:"pointer",color:"blue"}},[Mn,lt("\xA0Ver")],8,Pn)]),createButton:m(()=>[r(et,{icon:"add",onClick:l.create,text:"Crear",type:"default"},null,8,["onClick"])]),byStatusFilter:m(()=>[r(G,{width:"200","display-expr":"text","value-expr":"value",modelValue:t.filterState,"onUpdate:modelValue":e[0]||(e[0]=u=>t.filterState=u),items:[{value:"OPEN",text:"Abiertas"},{value:"IN_PROCESS",text:"En proceso"},{value:"CLOSED",text:"Cerradas"},{value:"REJECTED",text:"Rechazadas"}],onValueChanged:l.filterChange},null,8,["modelValue","onValueChanged"])]),refreshButton:m(()=>[r(et,{icon:"refresh",onClick:l.listCurrentStatus},null,8,["onClick"])]),default:m(()=>[r(_,{visible:!0}),r(h,{visible:!0}),r(g,{visible:!0,width:240,placeholder:"Buscar..."}),r(S,{mode:"virtual"}),r(U,{visible:!0}),r(v,{width:"100",caption:"Tipo","cell-template":"typeTemplate","data-field":"type.name","sort-order":"asc"}),r(v,{width:"120","data-field":"sector",caption:"Sector","sort-order":"asc"}),r(v,{"data-field":"description",caption:"Descripci\xF3n"}),r(v,{width:"140","data-field":"userName",caption:"Registrado por"}),r(v,{width:"140","data-field":"registerDate",caption:"Fecha","sort-order":"asc","cell-template":"timestampTemplate"}),r(v,{type:"buttons",width:110,"cell-template":"buttonsTemplate"}),r(Mt,null,{default:m(()=>[r(z,{location:"before",template:"createButton"}),r(z,{location:"after",template:"byStatusFilter"}),r(z,{location:"after",template:"refreshButton"})]),_:1})]),_:1},8,["data-source"]),r(kt,{visible:t.showPopup,"drag-enabled":!0,"hide-on-outside-click":!1,"show-close-button":!0,"show-title":!0,width:400,height:400,title:t.crudTitle,"on-hidden":l.onClosePopup},{default:m(()=>[r(Ft,{height:"calc(400px - 135px)"},{default:m(()=>[s("div",$n,[Ln,s("div",Hn,[r(G,{modelValue:t.model.sector,"onUpdate:modelValue":e[1]||(e[1]=u=>t.model.sector=u),"data-source":t.sectors,"display-value":"name","display-expr":"name"},null,8,["modelValue","data-source"])])]),s("div",Fn,[kn,s("div",Wn,[r(G,{modelValue:t.model.type,"onUpdate:modelValue":e[2]||(e[2]=u=>t.model.type=u),"data-source":t.incidentTypes,"display-value":"id","display-expr":"name"},null,8,["modelValue","data-source"])])]),s("div",Vn,[Un,s("div",zn,[s("label",{style:P({lineHeight:"2.5em",color:l.getStatus(t.model.status).color,backgroundColor:l.getStatus(t.model.status).backgroundColor,padding:"5px",borderRadius:"15px"})},A(l.getStatus(t.model.status).name),5)])]),s("div",Gn,[jn,s("div",Kn,[r(Lt,{height:90,modelValue:t.model.description,"onUpdate:modelValue":e[3]||(e[3]=u=>t.model.description=u)},null,8,["modelValue"])])]),s("div",Yn,[Xn,s("div",Jn,[s("label",{style:P({lineHeight:"2.5em"})},A(t.model.userName),5)])]),s("div",qn,[Zn,s("div",Qn,[s("label",{style:P({lineHeight:"2.5em"})},A(t.model.id?l.formatTimestamp(t.model.registerDate.toDate()):"AHORA"),5)])]),s("div",ti,[ei,s("div",ni,[r(Ht,{"data-source":t.model.media},{item:m(({data:u})=>[s("a",{href:u,target:"_blank"},"Ver Adjunto",8,ii)]),_:1},8,["data-source"])])])]),_:1}),t.model.status=="IN_PROCESS"&&!t.model.id?(y(),M(R,{key:0,widget:"dxButton",toolbar:"bottom",location:"after",options:{text:"Crear e Iniciar",type:"success",onClick:l.createAndStart}},null,8,["options"])):$("",!0),t.model.status=="OPEN"&&t.model.id?(y(),M(R,{key:1,widget:"dxButton",toolbar:"bottom",location:"after",options:{text:"Iniciar",type:"success",onClick:l.start}},null,8,["options"])):$("",!0),t.model.status=="IN_PROCESS"&&t.model.id?(y(),M(R,{key:2,widget:"dxButton",toolbar:"bottom",location:"after",options:{text:"Cerrar",type:"default",onClick:l.close}},null,8,["options"])):$("",!0),t.model.status=="OPEN"&&t.model.id?(y(),M(R,{key:3,widget:"dxButton",toolbar:"bottom",location:"before",options:{text:"Rechazar",type:"danger",onClick:l.reject}},null,8,["options"])):$("",!0)]),_:1},8,["visible","title","on-hidden"])])}const _i=de(Nn,[["render",ai]]);export{_i as default};
